'use strict';mix_d("SBVideoCards__multi-brand-video-desktop:multi-brand-video-desktop__vxpooV-k","require exports tslib @p/A @c/metrics @c/pagemarker @c/scoped-dom @c/dom @p/a-ajax @c/logger @p/a-carousel-constants @p/a-carousel-framework @p/a-carousel-strategies @c/aui-carousel @c/aui-utils @c/browser-operations @c/aui-modal @c/aui-untrusted-ajax".split(" "),function(zb,ta,n,Ab,z,Bb,Cb,ua,Db,Ja,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb){function D(b){return b&&"object"===typeof b&&"default"in b?b:{"default":b}}function Mb(b){if(b&&
b.__esModule)return b;var f=Object.create(null);b&&Object.keys(b).forEach(function(h){if("default"!==h){var e=Object.getOwnPropertyDescriptor(b,h);Object.defineProperty(f,h,e.get?e:{enumerable:!0,get:function(){return b[h]}})}});f["default"]=b;return f}var w=D(Ab),U=D(Bb),u=D(Cb),S=D(ua),Nb=D(Db),Ka=D(Ja),v=D(Eb),da=D(Fb),ea=D(Gb),La=D(Hb),Ma=D(Jb),Ob=D(Kb),Pb=D(Lb),Na={},va=function(b,f,h){void 0===f&&(f="");void 0===h&&(h=1);f=b+f;Na.hasOwnProperty(f)||(Na[f]=!0,z.count(b,(z.count(b)||0)+h))},Qb=
function(b){va(w["default"].capabilities.mobile?"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var f=function(e,a){e={$event:{preventDefault:w["default"].$.noop,stopPropagation:w["default"].$.noop},$target:e.getContent().find('[data-a-tab-name="'+a+'"]'),data:{name:"energyEfficiencyTabSet"}};w["default"].trigger("a:declarative:a-tabs:click",e)},h=function(e,a){var c=e&&e.$event,d=e&&e.data||{},g=d.activeTabName,k=d.modalHeight,l=d.name;c&&c.preventDefault&&c.preventDefault();
c&&c.stopPropagation&&c.stopPropagation();c=a.get(l);c||(w["default"].on("a:popover:beforeShow:"+l,function(p){p.popover&&p.popover.getContent&&(p=p.popover.getContent(),p.find(".a-manually-loaded").parent().css("min-height",k),w["default"].loadDescendantImagesManually(p))}),c=a.create(e.$target,d));c.show();f(c,g)};b.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(e){w["default"].declarative("card-energy-efficiency-secondary-view","click",function(a){va("Card:EERU:SharedLib:mobile:click",
a&&a.data&&a.data.name||"");h(a,e)})});b.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(e){w["default"].declarative("card-energy-efficiency-modal","click",function(a){va("Card:EERU:SharedLib:desktop:click",a&&a.data&&a.data.name||"");h(a,e)})})},Rb=function(b){b.when("ready").execute("EEBadgeProductFicheResize",function(f){var h=w["default"].$;h(".energyEfficiencyContainer").each(function(e,a){e=h(a).find(".energyEfficiencyProductFicheLabel").first();a=h(a).find("svg").first();
e.parent().outerHeight()>a.outerHeight()&&(e.removeClass("a-size-small"),e.addClass("a-size-micro"),e.parent().outerHeight()>a.outerHeight()&&e.parent().css("line-height","10px"))})})},Oa=function(){var b=window.P;Qb(b);Rb(b)},E;(function(b){b.VIDEO_SINGLE_PRODUCT="video-single-product";b.MULTI_BRAND_VIDEO="multi-brand-video";b.VIDEO_SINGLE_BRAND="video-single-brand";b.VIDEO_STORE="video-store";b.VIDEO_STORE_PRODUCT_FEATURE="video-store-product-feature";b.VIDEO_PRODUCT_COLLECTION="video-product-collection";
b.SHORT_FORM_VIDEO="short-form-video";b.THEMATIC_VIDEO="thematic-video";b.VIDEO_SPLIT="video-split"})(E||(E={}));var Pa;(function(b){b.SPARKLE_MOBILE="loom-mobile-top-slot";b.SPARKLE_DESKTOP="loom-desktop-top-slot";b.INLINE_MOBILE="loom-mobile-inline-slot";b.INLINE_DESKTOP="loom-desktop-inline-slot";b.BOTTOM_MOBILE="loom-mobile-bottom-slot";b.BOTTOM_DESKTOP="loom-desktop-bottom-slot";b.MOBILE_HQP="mobile-hero-quick-promo"})(Pa||(Pa={}));var fa=function(b,f){f=f||u["default"].cardRoot;return!b||f.matches(b)?
f:f.querySelector(b)},wa=function(b,f){return(f=fa("["+b+"]",f))?f.getAttribute(b):null},F=function(){return S["default"].cardRoot.ownerDocument},Sb=function(b,f){b.forEach(function(h){h.classList.remove(f)})},Qa=function(){},Tb=function(b){var f=b.url,h=b.onSuccess,e=b.onError;f?Nb["default"].get(f,{success:function(a){a&&"ok"===a.status?h(a):e()},error:e,abort:e}):e()},Ub=function(b){var f=b.url,h=b.payload,e=b.onSuccess,a=void 0===e?Qa:e;b=b.onError;b=void 0===b?Qa:b;f?fetch(f,{method:"POST",mode:"no-cors",
headers:{"Content-Type":"application/json"},body:h}).then(function(c){if(!c.ok&&0!==c.status)throw Error(c.status+" "+c.statusText);a(c)}).catch(b):b()},Vb=function(b){try{var f=encodeURIComponent,h=JSON,e=h.stringify,a=JSON.parse(b);var c={adCreativeMetaData:{adId:a.feedbackRequestAdId,advertiserId:a.feedbackRequestAdvertiserId,adNetwork:"aax",adProgramId:1010,adCreativeDetails:[{advertiserIdNS:a.feedbackRequestAdvertiserIdNS,campaignId:a.feedbackRequestCampaignId,selectionSignals:Ra(a.feedbackRequestSelectionSignals)}]},
adPlacementMetaData:{adElementId:a.adElementId,pageType:a.pageType,slotName:a.slotName}};return"/af/feedback-link?pl="+f(e.call(h,c))}catch(d){return null}},xa=function(){var b=fa('[data-id="afb-sponsored"]');b&&(b.style.display="block")},Sa=function(b,f){return n.__awaiter(void 0,void 0,void 0,function(){var h,e,a,c;return n.__generator(this,function(d){switch(d.label){case 0:h=f.cardName;e=f.isAdFeedbackForCards;if(!e)return[3,1];Wb(f).then(function(){b.reportAdFeedbackLoadSucceeded()}).catch(function(g){b.reportAdFeedbackLoadFailedFromErr(g.message||
"")});return[3,4];case 1:return d.trys.push([1,3,,4]),[4,Xb()];case 2:return d.sent(),b.reportAdFeedbackLoadSucceeded(),(a=u["default"].cardRoot.querySelector('[data-id="afb-content"]'))?a.querySelectorAll("a").forEach(function(g){g.addEventListener("click",b.reportAdFeedbackPopoverOpened)}):z.count(h+"-AdfeedbackElementNotFound"),[3,4];case 3:return c=d.sent(),b.reportAdFeedbackLoadFailedFromErr(c.message||""),[3,4];case 4:return[2]}})})},Wb=function(b){return n.__awaiter(void 0,void 0,void 0,function(){var f,
h,e,a,c;return n.__generator(this,function(d){switch(d.label){case 0:f=wa("data-ad-feedback");h=wa("data-ad-feedback-label-id");e=b.enableAdFeedback;if(!f||!h)return[2,Promise.reject(Error("data-ad-feedback attributes not found"))];a=JSON.parse(f);c=function(){return{adFeedbackLabelId:h,adCreativeMetaData:{adCreativeDetails:a.creativeDetails.map(function(g,k){var l=g.adId,p=g.advertiserId,t=g.advertiserIdNS,r=g.campaignId,x=Ra(g.selectionSignals),y=g.title;(g=g.imageUrl)?(g={url:g,width:0,height:0},
g={lowResolutionImage:g,highResolutionImages:[g]}):g=void 0;return{adId:l,advertiserId:p,adCreativeIndex:k,adNetwork:"aax",advertiserIdNS:t,campaignId:r,selectionSignals:x,title:y,adCreativeImage:g}})}}};d.label=1;case 1:return d.trys.push([1,3,,4]),[4,e(c)];case 2:return d.sent(),[3,4];case 3:return d.sent(),[2,Promise.reject(Error("enableAdFeedbackClient call failed"))];case 4:return[2,Promise.resolve("success")]}})})},Xb=function(){var b=wa("data-ad-feedback");if(b){var f=Vb(b);return new Promise(function(h,
e){Tb({url:f,onSuccess:function(a){try{var c=a.html,d=fa('[data-id="afb-content"]');if(d&&c){var g=fa('[data-id="afb-sponsored"]');g&&(g.style.display="none");d.innerHTML=c}var k=a.script;if(k){var l=F().createElement("script");l.type="text/javascript";l.innerHTML=k;fa().appendChild(l)}}catch(p){xa(),e(Error("setHtml or setScript failed"))}h("success")},onError:function(){xa();e(Error("get ad feedback request failed"))}})})}return Promise.reject(Error("data-ad-feedback attributes not found"))},Ra=
function(b){var f;if(b){switch(null===(f=b.pastActivity)||void 0===f?void 0:f.toUpperCase()){case "STORE_ONLY":f=1;break;case "AMAZON_AND_OTHER":f=3;break;case "AMAZON_ONLY":f=2;break;default:f=0}return n.__assign(n.__assign({},b),{pastActivity:f})}},V;(function(b){b.BETA="beta";b.GAMMA="gamma";b.PROD="prod"})(V||(V={}));var ya=function(){function b(){}b.getStage=function(){var f=F().defaultView;return(f=f&&f.location&&f.location.hostname)?"localhost"===f||"mix.corp.amazon.com"===f||"development.amazon.com"===
f||/^[a-z]{2}-development\.amazon\.com$/.test(f)?V.BETA:/^pre-prod\.amazon\.(com|[a-z]{2})$/.test(f)||/^pre-prod\.amazon\.com?\.[a-z]{2}$/.test(f)||/^[a-z]{2}-pre-prod\.amazon\.com$/.test(f)?V.GAMMA:V.PROD:V.PROD};return b}(),B=function(){function b(){}b.eventListeners={};b.addEventListener=function(f,h,e,a){b.setupListenerIfItDoesntExist(f,h);b.addCallbackWithPriority(f,h,e,a)};b.removeEventListener=function(f,h,e,a){b.removeCallbackWithPriority(f,h,e,a)&&b.removeListenerIfNoLongerNeeded(f,h)};b.removeListenerIfNoLongerNeeded=
function(f,h){0===b.eventListeners[f][h].listeners.length&&(f.removeEventListener(h,b.eventListeners[f][h].generatedCallback),delete b.eventListeners[f][h],Object.keys(b.eventListeners[f]).length&&delete b.eventListeners[f])};b.removeCallbackWithPriority=function(f,h,e,a){if(!b.eventListeners[f]||!b.eventListeners[f][h])return!1;b.eventListeners[f][h].listeners=b.eventListeners[f][h].listeners.filter(function(c){return c.priority!==e||c.callback!==a});return!0};b.setupListenerIfItDoesntExist=function(f,
h){b.eventListeners[f]||(b.eventListeners[f]={});b.eventListeners[f][h]||(b.eventListeners[f][h]={generatedCallback:b.generateCallback(f,h),listeners:[]},f.addEventListener(h,b.eventListeners[f][h].generatedCallback))};b.addCallbackWithPriority=function(f,h,e,a){b.eventListeners[f][h].listeners.push({callback:a,priority:e});b.eventListeners[f][h].listeners.sort(function(c,d){return c.priority-d.priority})};b.generateCallback=function(f,h){return function(e){b.eventListeners[f][h].listeners.forEach(function(a){a.callback&&
a.callback(e)})}};return b}(),Yb=["messageId","timestamp"],Zb=function(b){var f=function(){},h=function(){var a=function(){if(b.XDomainRequest){var c=new b.XDomainRequest;c.onerror=f;c.ontimeout=f;c.onprogress=f;c.onload=f;c.timeout=0;return c}if(b.XMLHttpRequest){c=new b.XMLHttpRequest;if(!("withCredentials"in c))throw"";return c}return null};return{isSupported:!0,send:function(c,d){if(d&&c){var g=a();if(!g)throw"";g.open("POST",c,!0);g.setRequestHeader&&g.setRequestHeader("Content-type","text/plain");
g.send(d)}}}}(),e=function(){return{isSupported:!!b.navigator.sendBeacon,send:function(a,c){if(a&&c&&!b.navigator.sendBeacon(a,c))throw"";}}}();return{ajaxClient:h,beaconClient:e}},$b=function(){return function(b,f){var h=this;this.flush=function(a){void 0===a&&(a=!1);h.eventsQueue.length&&(a||!1!==h.browserWindow.navigator.onLine)&&(a=h.eventsQueue.length,h.sendWithPriority(h.transportationClient.beaconClient,h.transportationClient.ajaxClient),h.resetBatch(),h.ueCount("EventsSent",a))};this.processEvent=
function(a,c){void 0===c&&(c={n:1});var d=h.unloadHandlerCalled=!1;h.isValidAPICall(a)&&(d=h.addEvent(a,c));d?h.ueCount("ClientEventsSuccess"):h.ueCount("ClientEventsFailed");return d};this.getEventQueueCount=function(){return h.eventsQueue.length};this.buildCompressor=function(){var a=function(k){return k.length>("#"+h.dictionaryIndex).length||"#"===k.charAt(0)},c=function(k){if(k)switch(typeof k){case "number":return!(isNaN(k)||Infinity===k)&&a(k.toString());case "boolean":break;case "string":return a(k);
default:return!0}return!1},d=function(k){h.eventsDictionary[k]="#"+h.dictionaryIndex++;h.reverseEventsDictionary[h.eventsDictionary[k]]=k;return h.eventsDictionary[k]},g=function(k){if(c(k)){var l=0;k instanceof Array?l=2:k instanceof Function?l=null:k instanceof Object&&(l=1);switch(l){case 0:return h.eventsDictionary[k]?h.eventsDictionary[k]:d(k);case 2:var p=[];for(l=0;l<k.length;l++)p[l]=g(k[l]);return p;case 1:l={};for(p in k)Object.prototype.hasOwnProperty.call(k,p)&&(l[h.eventsDictionary[p]?
h.eventsDictionary[p]:d(p)]=-1===Yb.indexOf(p)?g(k[p]):k[p]);return l}}return k};return{buildPOSTObject:function(){return h.stringify({cs:{dct:h.reverseEventsDictionary},events:h.eventsQueue})},compressData:g}};this.onBeforeUnload=function(){!0!==h.unloadHandlerCalled&&(h.flush(),h.unloadHandlerCalled=!0)};this.stringify=function(a){try{return JSON.stringify(a)}catch(c){return null}};this.resetBatch=function(){h.eventsQueue=[];h.eventsDictionary={};h.reverseEventsDictionary={};h.dictionaryIndex=0;
h.batchSize=0;h.lowPriorityTimer=0;h.highPriorityTimer=0};this.sendWithClient=function(a){if(null==h.endpoint||""===h.endpoint)h.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var c=h.compressor.buildPOSTObject();return a.send(h.endpoint,c)}throw"";}};this.sendWithPriority=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];for(c=0;c<a.length;c++){var d=a[c];try{return h.sendWithClient(d)}catch(g){}}return null};this.startHighPriorityQueueTimer=function(){0===h.highPriorityFlushInterval?
h.flush():h.highPriorityTimer||(h.highPriorityTimer=setTimeout(h.flush,h.highPriorityFlushInterval,h,!1))};this.startLowPriorityQueueTimer=function(){h.lowPriorityTimer||(h.lowPriorityTimer=setTimeout(h.flush,h.lowPriorityFlushInterval,h,!1))};this.generateMessageId=function(a,c){return a+"-"+c+"-"+h.eventSequence};this.getCurrentISODate=function(){var a=new Date,c=function(d){return 10>d?"0"+d:d};return"function"===typeof Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+c(a.getUTCMonth()+
1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};this.decorateEvent=function(a){a.timestamp=h.getCurrentISODate();a.sequence=h.eventSequence;a.messageId=h.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(a){a.n?h.startHighPriorityQueueTimer():h.startLowPriorityQueueTimer()};this.encodeEvent=function(a,c,d){c=c.length;(499===h.eventsQueue.length||
524288<h.batchSize+c)&&h.flush(!0);h.batchSize+=c;a={data:h.compressor.compressData(a)};h.eventsQueue.push(a);h.startTimers(d)};this.addEvent=function(a,c){h.decorateEvent(a);var d=h.stringify(a);return d?(h.encodeEvent(a,d,c),!0):!1};this.isValidAPIParam=function(a,c){return a&&-1<a.constructor.toString().indexOf(c)};this.isMaxCallsReached=function(){h.eventSequence++;1E3<h.eventSequence&&h.ueCount("SushiClientMaxCallsReached");return 1E3<h.eventSequence};this.isValidAPICall=function(a){return!h.isMaxCallsReached()&&
h.isValidAPIParam(a,"Object")};this.ueCount=function(a,c){try{var d=0===c?0:c||(z.count(h.metricsTag+":"+a)||0)+1;z.count(h.metricsTag+":"+a,d);return d}catch(g){return Ja.log("SushiClient.ueCount error: "+g,"ERROR"),0}};this.browserWindow=F().defaultView;this.endpoint=b;this.metricsTag=f;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=
1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=Zb(this.browserWindow);this.compressor=this.buildCompressor();B.addEventListener(this.browserWindow,"beforeunload",100,this.onBeforeUnload);B.addEventListener(F(),"visibilitychange",100,this.onBeforeUnload);B.addEventListener(this.browserWindow,"blur",100,this.onBeforeUnload);B.addEventListener(this.browserWindow,"pagehide",100,this.onBeforeUnload);this.browserWindow.app||(this.browserWindow.app={});var e=this.browserWindow.app.willDisappear;
this.browserWindow.app.willDisappear=function(){e&&e();h.onBeforeUnload()}}}(),I;(function(b){b.VIEWED="VIEWED";b.PROGRESS_FIVE_SECONDS="PROGRESS_5_SEC";b.FIRST_QUARTILE="FIRST_QUARTILE";b.MIDPOINT="MIDPOINT";b.THIRD_QUARTILE="THIRD_QUARTILE";b.COMPLETE="COMPLETE";b.UNMUTE="UNMUTE"})(I||(I={}));var J;(function(b){b.ICON_TAP="IconTap";b.VIDEO_OFF_SCREEN="VideoOffScreen";b.INHERIT="Inherit";b.WEBKIT_MUTED="WebkitMuted"})(J||(J={}));var W;(function(b){b.ICON_TAP="IconTap";b.VIDEO_OFF_SCREEN="VideoOffScreen";
b.INHERIT="Inherit";b.DEFAULT_ON="DefaultOn"})(W||(W={}));var Ta;(function(b){b.SINGLE_PAGE="SINGLE_PAGE";b.CROSS_PAGE="CROSS_PAGE"})(Ta||(Ta={}));var Ua;(function(b){b.CONTENT_HASH="CONTENT_HASH";b.CAMPAIGN_AND_ADV_ID="CAMPAIGN_AND_ADV_ID"})(Ua||(Ua={}));var q;(function(b){b.ACE_VIDEO_RESPONSE_RECEIVED="AceVideoResponseReceived";b.AD_FEEDBACK_LOAD_FAILED_FROM_ERR="AdFeedbackLoadFailedFromErr";b.AD_FEEDBACK_LOAD_SUCCEEDED="AdFeedbackLoadSucceeded";b.AD_FEEDBACK_LOAD_POPOVER_OPENED="AdFeedbackPopoverOpened";
b.AUDIO_TOGGLE_ICON_DISPLAYED="AudioToggleIconDisplayed";b.BACKGROUND_CLICKED="BackgroundClicked";b.PAUSE_ICON_DISPLAYED="PauseIconDisplayed";b.PROGRESS_BAR_DISPLAYED="ProgressBarDisplayed";b.BRAND_LOGO_CLICKED="BrandLogoClicked";b.BRAND_CTA_LINK_CLICKED="BrandCtaLinkClicked";b.CARD_ITEM_RECEIVED="CardItemReceived";b.CAROUSEL_PAGE_CHANGED="CarouselPageChanged";b.CAPTIONS_ENABLED="CaptionsEnabled";b.CAPTIONS_DISABLED="CaptionsDisabled";b.CAPTIONS_LOAD_FAILURE="CaptionsLoadFailure";b.DUPE="Dupe";b.DUPE_BY_ADVID_CAMPAIGNID=
"DupeByAdvIdCampaignId";b.DUPE_BY_CONTENT_HASH="DupeByContentHash";b.HEADLINE_CLICKED="HeadlineClicked";b.IMMERSIVE_VIDEO_FAILED="ImmersiveVideoFailed";b.IMMERSIVE_VIDEO_LOADED="ImmersiveVideoLoaded";b.MISSING_BACKGROUND_ELEMENT="MissingBackgroundElement";b.MISSING_BRAND_ELEMENT="MissingBrandElement";b.MISSING_PRODUCT_ELEMENT="MissingProductElement";b.MISSING_PRODUCT_ELEMENTS="MissingProductElements";b.MISSING_VIDEO_ELEMENT="MissingVideoElement";b.NO_AD_ERROR="NoAdError";b.NO_VIDEO_SRC_ON_ELEMENT=
"NoVideoSrcOnElement";b.NUMBER_OF_ADS_LESS_THAN_MIN_ERR="NumberOfAdsLessThanMin";b.PLAYBACK_COMPLETED="PlaybackCompleted";b.PROGRESS_BAR_RESET="ProgressBarReset";b.PLAYBACK_FAILED_TO_START_AFTER_PLAY="PlaybackFailedToStartAfterPlay";b.PRODUCT_CLICKED="ProductClicked";b.PRODUCT_RECEIVED="ProductReceived";b.PRODUCT_TWISTER_VARIATION="ProductTwisterVariation";b.MULTI_PRODUCT_COLLECTION="MultiProductCollection";b.REMOTE_OPERATIONS_AJAX_STARTED="RemoteOperationsAjaxStarted";b.REMOTE_OPERATIONS_AJAX_SUCCESSFUL=
"RemoteOperationsAjaxSuccessful";b.REMOTE_OPERATIONS_ELEMENTS_UPDATED="RemoteOperationsElementsUpdated";b.REMOTE_OPERATIONS_ELEMENTS_NOT_UPDATED="RemoteOperationsElementsNotUpdated";b.REMOTE_OPERATIONS_FAILED="RemoteOperationsFailed";b.TIME_TO_FIRST_FRAME="TimeToFirstFrame";b.VIDEO_ABORTED="VideoAborted";b.VIDEO_BUFFERING_ENDED="VideoBufferingEnded";b.VIDEO_BUFFERING_STARTED="VideoBufferingStarted";b.VIDEO_CLICKED="VideoClicked";b.VIDEO_DURATION_PLAYED="VideoDurationPlayed";b.VIDEO_OFF_SCREEN="VideoOffScreen";
b.VIDEO_ON_SCREEN="VideoOnScreen";b.VIDEO_PAUSED="VideoPaused";b.VIDEO_PAUSED_INITIATED="VideoPausedInitiated";b.VIDEO_PAUSE_BUTTON_TRIGGERED="VideoPauseButtonTriggered";b.VIDEO_PLAY_BUTTON_TRIGGERED="VideoPlayButtonTriggered";b.VIDEO_PLAY_FROM_PAUSE="VideoPlayFromPause";b.VIDEO_PLAYBACK_FAILURE="VideoPlaybackFailure";b.VIDEO_PLAYBACK_INITIATED="VideoPlaybackInitiated";b.VIDEO_PLAYBACK_STARTED="VideoPlaybackStarted";b.VIDEO_PLAY_PROMISE_NOT_SUPPORTED="VideoPlayPromiseNotSupported";b.VIDEO_PLAY_PROMISE_REJECTED=
"VideoPlayPromiseRejected";b.VIDEO_READY_FOR_PLAYBACK="VideoReadyForPlayback";b.VIDEO_SOUND_OFF="VideoSoundOff";b.VIDEO_SOUND_ON="VideoSoundOn";b.VIDEO_SUSPENDED="VideoSuspended";b.VIDEO_VIEW="VideoView";b.VM_AD_UNIT_VIEWED="ViewMetricsAdUnitViewed";b.VM_VIDEO_VIEWED="ViewMetricsVideoViewed";b.VM_VIDEO_PROGRESS_FIVE_SECONDS="ViewMetricsVideoProgressFiveSeconds";b.VM_VIDEO_FIRST_QUARTILE="ViewMetricsVideoFirstQuartile";b.VM_VIDEO_MIDPOINT="ViewMetricsVideoMidpoint";b.VM_VIDEO_THIRD_QUARTILE="ViewMetricsVideoThirdQuartile";
b.VM_VIDEO_COMPLETE="ViewMetricsVideoComplete";b.VM_VIDEO_UNMUTE="ViewMetricsVideoUnmute";b.VM_POST_FAILURE="ViewMetricsPostFailure";b.WIDGET_ON_SCREEN="WidgetOnScreen";b.MULTI_ASIN_ADS_RECEIVED="MultiAsinAdsReceived";b.PDP_RENDERED_AS_PC="PDPRenderedAsPC"})(q||(q={}));var m;(function(b){b.APP_VERSION="appVersion";b.ADVERTISER_ID="advertiserId";b.AUTO_SCROLLED="autoScrolled";b.CAMPAIGN_ID="campaignId";b.CAROUSEL_ITEM_INDEX="carouselItemIndex";b.CAROUSEL_PAGE_NUMBER="carouselPageNumber";b.CC_TOGGLE_CAUSE=
"ccToggleCause";b.CC_MANDATORY="ccMandatory";b.CC_SRC="ccSrc";b.CLIENT_ID="clientId";b.CONTINUOUS_PLAYBACK_DURATION_MS="continuousPlaybackDurationMs";b.CURRENT_PAGE_URL="currentPageUrl";b.DEVICE_ENV="deviceEnv";b.DEVICE_MAKE="deviceMake";b.DEVICE_MODEL="deviceModel";b.DEVICE_OS="deviceOs";b.DEVICE_PLATFORM_VERSION="devicePlatformVersion";b.DEVICE_TYPE="deviceType";b.DROPPED_FRAMES="droppedFrames";b.ERROR_CODE="errorCode";b.ERROR_MESSAGE="errorMessage";b.EVENT_TYPE="eventType";b.HEADLINE="headline";
b.IMAGE_URL="imageUrl";b.LANGUAGE="language";b.LINK_URL="linkUrl";b.LOAD_TIME_MS="loadTimeMs";b.LOGIC="logic";b.MARKETPLACE_ID="marketplaceId";b.METRICS_IDENTIFIER="metricsIdentifier";b.METRICS_SEQUENCE_NUMBER="metricsSequenceNumber";b.NETWORK_TYPE="networkType";b.NUMBER_OF_ADS="numberOfAds";b.PAGE_NUMBER="pageNumber";b.PAGE_TYPE="pageType";b.PERCENT_DOWNLOADED="percentDownloaded";b.PREV_CAROUSEL_PAGE_NUMBER="prevCarouselPageNumber";b.PRODUCT_INDEX="productIndex";b.PRODUCT_ASIN="asin";b.TWISTER_VARIATIONS_REQUESTED=
"twisterVariationsRequested";b.TWISTER_VARIATIONS_REQUEST_SUCCEEDED="twisterVariationsRequestSuceeded";b.TWISTER_VARIATIONS_DETAIL_REQUESTED="twisterVariationsDetailRequested";b.TWISTER_VARIATIONS_CHOSEN="twisterVariationsChosen";b.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED="numberOfTwisterVariationsReceived";b.REASON="reason";b.RETRY_COUNT="retryCount";b.SEARCH_QUERY="searchQuery";b.SOUND_TOGGLE_METHOD="soundToggleMethod";b.STAGE="stage";b.STATUS_CODE="statusCode";b.STORE_CTA="storeCta";b.TIME_ON_SCREEN_MS=
"timeOnScreenMs";b.USER_AGENT="userAgent";b.VIDEO_BOUNDARY_CROSSED_TIME_MS="videoBoundaryCrossedTimeMs";b.VIDEO_CURRENT_TIME_MS="videoCurrentTimeMs";b.VIDEO_PREVIEW_IMAGE_SRC="videoPreviewImageSrc";b.VIDEO_SRC="videoSrc";b.VIDEO_TOTAL_LENGTH_MS="videoTotalLengthMs";b.VIDEO_TYPE="videoType";b.WAS_BUFFERING="wasBuffering";b.WEBLABS="weblabs";b.WIDGET_GROUP_ID="widgetGroupId";b.WIDGET_INDEX="widgetIndex";b.WIDGET_TYPE="widgetType";b.VIEW_METRICS_FAILURE="viewMetricsFailure";b.MULTI_ASIN_ADS_COUNT="MultiAsinAdsCount"})(m||
(m={}));var Va={shouldLogViewMetrics:!1,shouldBillViewMetrics:!0,shouldLogAdUnitViewMetrics:!1},Wa=function(){return function(b,f,h){var e=this;void 0===h&&(h=Va);this.reportPDPRenderedAsPC=function(a){a=e.newEvent(q.PDP_RENDERED_AS_PC,a);e.recordEvent(a)};this.setClientMetricsContext=function(a){e.clientMetricsContext=a};this.reportWidgetOnScreen=function(){var a=e.newEvent(q.WIDGET_ON_SCREEN,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportResponseReceived=function(a){var c=e.newEvent(q.ACE_VIDEO_RESPONSE_RECEIVED,
e.resetVideoAdAttributes());c[m.NUMBER_OF_ADS]=null!==a&&void 0!==a?a:1;e.recordEvent(c)};this.reportNumAsins=function(a){var c=e.newEvent(q.MULTI_ASIN_ADS_RECEIVED);c[m.MULTI_ASIN_ADS_COUNT]=a;e.recordEvent(c)};this.reportNoAdError=function(){var a=e.newEvent(q.NO_AD_ERROR,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportNumOfAdsLessThanMinRequirement=function(){var a=e.newEvent(q.NUMBER_OF_ADS_LESS_THAN_MIN_ERR,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportAdFeedbackLoadFailedFromErr=
function(a){var c=e.newEvent(q.AD_FEEDBACK_LOAD_FAILED_FROM_ERR,e.resetVideoAdAttributes());c[m.ERROR_MESSAGE]=a;e.recordEvent(c)};this.reportAdFeedbackLoadSucceeded=function(){var a=e.newEvent(q.AD_FEEDBACK_LOAD_SUCCEEDED,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportAdFeedbackPopoverOpened=function(){var a=e.newEvent(q.AD_FEEDBACK_LOAD_POPOVER_OPENED,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportImmersiveVideoLoaded=function(a){a=e.newEvent(q.IMMERSIVE_VIDEO_LOADED,a);e.recordEvent(a)};
this.reportImmersiveVideoFailed=function(a,c){c=e.newEvent(q.IMMERSIVE_VIDEO_FAILED,c);c[m.ERROR_MESSAGE]=a;e.recordEvent(c)};this.reportVideoReadyForPlayback=function(a,c,d,g,k){g=e.newEvent(q.VIDEO_READY_FOR_PLAYBACK,g);g[m.LOAD_TIME_MS]=a;g[m.RETRY_COUNT]=c;g[m.PERCENT_DOWNLOADED]=d;g[m.VIDEO_TOTAL_LENGTH_MS]=k;e.recordEvent(g)};this.reportVideoPlaybackInitiated=function(a,c){c=e.newEvent(q.VIDEO_PLAYBACK_INITIATED,c);c[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(c)};this.reportVideoPlaybackStarted=
function(a,c,d,g){g=e.newEvent(q.VIDEO_PLAYBACK_STARTED,g);g[m.VIDEO_CURRENT_TIME_MS]=a;g[m.PERCENT_DOWNLOADED]=c;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};this.reportTimeToFirstFrame=function(a,c,d,g){g=e.newEvent(q.TIME_TO_FIRST_FRAME,g);g[m.LOAD_TIME_MS]=a;g[m.PERCENT_DOWNLOADED]=c;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};this.reportVideoBufferingStarted=function(a,c,d,g){g=e.newEvent(q.VIDEO_BUFFERING_STARTED,g);g[m.VIDEO_CURRENT_TIME_MS]=a;g[m.PERCENT_DOWNLOADED]=c;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};
this.reportVideoBufferingEnded=function(a,c,d,g){g=e.newEvent(q.VIDEO_BUFFERING_ENDED,g);g[m.VIDEO_CURRENT_TIME_MS]=a;g[m.PERCENT_DOWNLOADED]=c;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};this.reportVideoPlaybackFailure=function(a,c,d,g){g=e.newEvent(q.VIDEO_PLAYBACK_FAILURE,g);g[m.VIDEO_CURRENT_TIME_MS]=a;g[m.ERROR_MESSAGE]=c;g[m.ERROR_CODE]=d;e.recordEvent(g)};this.reportVideoDurationPlayed=function(a,c,d,g){g=e.newEvent(q.VIDEO_DURATION_PLAYED,g);g[m.VIDEO_BOUNDARY_CROSSED_TIME_MS]=a;g[m.PERCENT_DOWNLOADED]=
c;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};this.reportPlaybackCompleted=function(a,c,d){d=e.newEvent(q.PLAYBACK_COMPLETED,d);d[m.VIDEO_CURRENT_TIME_MS]=a;d[m.DROPPED_FRAMES]=c;e.recordEvent(d)};this.reportVideoOnScreen=function(a,c){c=e.newEvent(q.VIDEO_ON_SCREEN,c);c[m.PERCENT_DOWNLOADED]=a;e.recordEvent(c)};this.reportVideoOffScreen=function(a,c,d,g){g=e.newEvent(q.VIDEO_OFF_SCREEN,g);g[m.TIME_ON_SCREEN_MS]=a;g[m.WAS_BUFFERING]=c;g[m.VIDEO_CURRENT_TIME_MS]=d;e.recordEvent(g)};this.reportVideoView=
function(a,c,d){void 0===c&&(c=!1);d=e.newEvent(q.VIDEO_VIEW,d);d[m.CONTINUOUS_PLAYBACK_DURATION_MS]=a;e.recordEvent(d);c&&e.sushiClient.flush(!0)};this.reportVideoPauseInitiated=function(a,c){c=e.newEvent(q.VIDEO_PAUSED_INITIATED,c);c[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(c)};this.reportVideoPlayFromPause=function(a,c){c=e.newEvent(q.VIDEO_PLAY_FROM_PAUSE,c);c[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(c)};this.reportVideoPaused=function(a,c,d,g){g=e.newEvent(q.VIDEO_PAUSED,g);g[m.VIDEO_CURRENT_TIME_MS]=
a;g[m.PERCENT_DOWNLOADED]=c;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};this.reportVideoSoundOn=function(a,c,d){d=e.newEvent(q.VIDEO_SOUND_ON,d);d[m.VIDEO_CURRENT_TIME_MS]=a;d[m.SOUND_TOGGLE_METHOD]=c;e.recordEvent(d)};this.reportVideoSoundOff=function(a,c,d){d=e.newEvent(q.VIDEO_SOUND_OFF,d);d[m.VIDEO_CURRENT_TIME_MS]=a;d[m.SOUND_TOGGLE_METHOD]=c;e.recordEvent(d)};this.reportCaptionsOn=function(a,c,d,g){c=e.newEvent(q.CAPTIONS_ENABLED,c);c[m.LANGUAGE]=d;c[m.CC_MANDATORY]=g;c[m.CC_TOGGLE_CAUSE]=a;e.recordEvent(c)};
this.reportCaptionsOff=function(a,c,d,g){c=e.newEvent(q.CAPTIONS_DISABLED,c);c[m.LANGUAGE]=d;c[m.CC_MANDATORY]=g;c[m.CC_TOGGLE_CAUSE]=a;e.recordEvent(c)};this.reportCaptionsLoadFailure=function(a){var c=e.newEvent(q.CAPTIONS_LOAD_FAILURE,a);c[m.CC_SRC]=a.ccSrc;e.recordEvent(c)};this.reportDupe=function(a,c,d){a=e.newEvent(q.DUPE,a);a[m.LOGIC]=c;a[m.REASON]=d;e.recordEvent(a)};this.reportDupeByCampaignAndAdvertiserId=function(a){a=e.newEvent(q.DUPE_BY_ADVID_CAMPAIGNID,a);e.recordEvent(a)};this.reportDupeByContentHash=
function(a){a=e.newEvent(q.DUPE_BY_CONTENT_HASH,a);e.recordEvent(a)};this.reportVideoClicked=function(a,c){c=e.newEvent(q.VIDEO_CLICKED,c,e.getDynamicMetricsAttributes());c[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(c)};this.reportProductClicked=function(a,c,d){c=e.newEvent(q.PRODUCT_CLICKED,c,e.getDynamicMetricsAttributes());c[m.VIDEO_CURRENT_TIME_MS]=a;d&&(a=d.productIndex,c[m.PRODUCT_ASIN]=d.asin,c[m.PRODUCT_INDEX]=a);e.recordEvent(c)};this.reportBackgroundClicked=function(a,c){c=e.newEvent(q.BACKGROUND_CLICKED,
c,e.getDynamicMetricsAttributes());c[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(c)};this.reportProductReceived=function(a,c,d){c=e.newEvent(q.PRODUCT_RECEIVED,c,e.getDynamicMetricsAttributes());c[m.VIDEO_CURRENT_TIME_MS]=a;d&&(c[m.PRODUCT_ASIN]=d.asin);e.recordEvent(c)};this.reportProductTwisterVariations=function(a,c){a=e.newEvent(q.PRODUCT_TWISTER_VARIATION,a);if(c&&c.twisterVariationProperties){var d=c.twisterVariationProperties;c=d.twisterVariationsRequested;var g=d.twisterVariationsRequestSucceeded,
k=d.twisterVariationDetailsRequested,l=d.numberOfTwisterVariationsAvailable;d=d.asinForTwisterChosen;a[m.TWISTER_VARIATIONS_REQUESTED]=null!==c&&void 0!==c?c:!1;a[m.TWISTER_VARIATIONS_REQUEST_SUCCEEDED]=null!==g&&void 0!==g?g:!1;a[m.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED]=l;a[m.TWISTER_VARIATIONS_DETAIL_REQUESTED]=null!==k&&void 0!==k?k:!1;a[m.TWISTER_VARIATIONS_CHOSEN]=d}e.recordEvent(a)};this.reportProductAttributes=function(a,c){a=e.newEvent(q.MULTI_PRODUCT_COLLECTION,a);if(c){var d=c.productUrl;
a[m.PRODUCT_ASIN]=c.asin;a[m.LINK_URL]=d}e.recordEvent(a)};this.reportPlaybackFailedToStartAfterPlay=function(a){a=e.newEvent(q.PLAYBACK_FAILED_TO_START_AFTER_PLAY,a);e.recordEvent(a)};this.reportAudioToggleIconDisplayed=function(a){a=e.newEvent(q.AUDIO_TOGGLE_ICON_DISPLAYED,a);e.recordEvent(a)};this.reportProgressBarDisplayed=function(a){a=e.newEvent(q.PROGRESS_BAR_DISPLAYED,a);e.recordEvent(a)};this.reportProgressBarReset=function(a){a=e.newEvent(q.PROGRESS_BAR_RESET,a);e.recordEvent(a)};this.reportPauseIconDisplayed=
function(a){a=e.newEvent(q.PAUSE_ICON_DISPLAYED,a);e.recordEvent(a)};this.reportVideoPauseButtonTriggered=function(a,c){c=e.newEvent(q.VIDEO_PAUSE_BUTTON_TRIGGERED,c);c[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(c)};this.reportVideoAborted=function(a,c){c=e.newEvent(q.VIDEO_ABORTED,c);c[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(c)};this.reportVideoSuspended=function(a,c){c=e.newEvent(q.VIDEO_SUSPENDED,c);c[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(c)};this.reportVideoPlayPromiseRejected=function(a,c){c=
e.newEvent(q.VIDEO_PLAY_PROMISE_REJECTED,c);c[m.ERROR_MESSAGE]=a;e.recordEvent(c)};this.reportVideoPlayPromiseNotSupported=function(a){a=e.newEvent(q.VIDEO_PLAY_PROMISE_NOT_SUPPORTED,a);e.recordEvent(a)};this.reportMissingVideoElement=function(a){a=e.newEvent(q.MISSING_VIDEO_ELEMENT,a);e.recordEvent(a)};this.reportMissingProductElement=function(a){a=e.newEvent(q.MISSING_PRODUCT_ELEMENT,a);e.recordEvent(a)};this.reportMissingProductElements=function(a){a=e.newEvent(q.MISSING_PRODUCT_ELEMENTS,a);e.recordEvent(a)};
this.reportMissingBackgroundElement=function(a){a=e.newEvent(q.MISSING_BACKGROUND_ELEMENT,a);e.recordEvent(a)};this.reportMissingBrandElement=function(a){a=e.newEvent(q.MISSING_BRAND_ELEMENT,a);e.recordEvent(a)};this.reportBrandCtaLinkClicked=function(a,c){c=e.newEvent(q.BRAND_CTA_LINK_CLICKED,c);c[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(c)};this.reportBrandLogoClicked=function(a,c){c=e.newEvent(q.BRAND_LOGO_CLICKED,c);c[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(c)};this.reportHeadlineClicked=function(a,
c){c=e.newEvent(q.HEADLINE_CLICKED,c);c[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(c)};this.reportCarouselPageChanged=function(a,c,d){void 0===d&&(d=!1);var g=e.newEvent(q.CAROUSEL_PAGE_CHANGED);g[m.CAROUSEL_PAGE_NUMBER]=a;g[m.PREV_CAROUSEL_PAGE_NUMBER]=c;g[m.AUTO_SCROLLED]=d;e.recordEvent(g)};this.reportCardItemReceived=function(a,c){c=e.newEvent(q.CARD_ITEM_RECEIVED,c);c[m.CAROUSEL_PAGE_NUMBER]=a;e.recordEvent(c)};this.reportVideoPlayButtonTriggered=function(a,c){c=e.newEvent(q.VIDEO_PLAY_BUTTON_TRIGGERED,
c);c[m.CAROUSEL_ITEM_INDEX]=a;e.recordEvent(c)};this.reportRemoteOperationsAjaxStarted=function(){var a=e.newEvent(q.REMOTE_OPERATIONS_AJAX_STARTED);e.recordEvent(a)};this.reportRemoteOperationsAjaxSuccessful=function(a){var c=e.newEvent(q.REMOTE_OPERATIONS_AJAX_SUCCESSFUL);c[m.LOAD_TIME_MS]=a;e.recordEvent(c)};this.reportRemoteOperationsElementsUpdated=function(){var a=e.newEvent(q.REMOTE_OPERATIONS_ELEMENTS_UPDATED);e.recordEvent(a)};this.reportRemoteOperationsElementsNotUpdated=function(){var a=
e.newEvent(q.REMOTE_OPERATIONS_ELEMENTS_NOT_UPDATED);e.recordEvent(a)};this.reportRemoteOperationsFailed=function(){var a=e.newEvent(q.REMOTE_OPERATIONS_FAILED);e.recordEvent(a)};this.reportViewMetricsAdUnitViewed=function(a){if(e.getShouldLogViewMetrics()&&e.getShouldLogAdUnitViewMetrics()){var c=e.newEvent(q.VM_AD_UNIT_VIEWED,a);e.recordEvent(c);e.emitViewMetrics(I.VIEWED,a)}};this.reportViewMetricsVideoViewed=function(a){if(e.getShouldLogViewMetrics()){var c=e.newEvent(q.VM_VIDEO_VIEWED,a);e.recordEvent(c);
e.getShouldLogAdUnitViewMetrics()||e.emitViewMetrics(I.VIEWED,a)}};this.reportViewMetricsVideoProgressFiveSeconds=function(a){if(e.getShouldLogViewMetrics()){var c=e.newEvent(q.VM_VIDEO_PROGRESS_FIVE_SECONDS,a);e.recordEvent(c);e.emitViewMetrics(I.PROGRESS_FIVE_SECONDS,a)}};this.reportViewMetricsVideoFirstQuartile=function(a){if(e.getShouldLogViewMetrics()){var c=e.newEvent(q.VM_VIDEO_FIRST_QUARTILE,a);e.recordEvent(c);e.emitViewMetrics(I.FIRST_QUARTILE,a)}};this.reportViewMetricsVideoMidpoint=function(a){if(e.getShouldLogViewMetrics()){var c=
e.newEvent(q.VM_VIDEO_MIDPOINT,a);e.recordEvent(c);e.emitViewMetrics(I.MIDPOINT,a)}};this.reportViewMetricsVideoThirdQuartile=function(a){if(e.getShouldLogViewMetrics()){var c=e.newEvent(q.VM_VIDEO_THIRD_QUARTILE,a);e.recordEvent(c);e.emitViewMetrics(I.THIRD_QUARTILE,a)}};this.reportViewMetricsVideoComplete=function(a){if(e.getShouldLogViewMetrics()){var c=e.newEvent(q.VM_VIDEO_COMPLETE,a);e.recordEvent(c);e.emitViewMetrics(I.COMPLETE,a)}};this.reportViewMetricsVideoUnmute=function(a){if(e.getShouldLogViewMetrics()){var c=
e.newEvent(q.VM_VIDEO_UNMUTE,a);e.recordEvent(c);e.emitViewMetrics(I.UNMUTE,a)}};this.reportViewMetricsPostRequestFailure=function(a,c,d){d=e.newEvent(q.VM_POST_FAILURE,d);d[m.VIEW_METRICS_FAILURE]=a;d[m.ERROR_MESSAGE]=c;e.recordEvent(d)};this.emitViewMetrics=function(a,c){if(e.getShouldBillViewMetrics()){var d=c.instrumentationPixelUrl;if(void 0===d||""===d)e.reportViewMetricsPostRequestFailure(a,"instrumentationPixelUrl is empty or undefined",c);else{var g=JSON.stringify({v:{def:"iab",event:a},
programType:"SBV"});d="/"===d.substr(-1)?d+"v/":d+"/v/";Ub({onError:function(k){e.reportViewMetricsPostRequestFailure(a,k.message,c)},payload:g,url:d+encodeURI(g)})}}};this.getShouldLogViewMetrics=function(){return e.viewMetricOptions.shouldLogViewMetrics};this.getShouldLogAdUnitViewMetrics=function(){return e.viewMetricOptions.shouldLogAdUnitViewMetrics};this.getShouldBillViewMetrics=function(){return e.viewMetricOptions.shouldLogViewMetrics&&e.viewMetricOptions.shouldBillViewMetrics};this.recordEvent=
function(a){e.sushiClient.processEvent(a)};this.resetVideoAdAttributes=function(){return{advertiserId:void 0,campaignId:void 0,contentHash:void 0,headline:void 0,storeCta:void 0,imageUrl:void 0,instrumentationPixelUrl:void 0,linkUrl:void 0,metricsIdentifier:void 0,videoPreviewImageSrc:void 0,videoSrc:void 0}};this.getDynamicMetricsAttributes=function(){var a,c;return null===(c=null===(a=e.clientMetricsContext)||void 0===a?void 0:a.getDynamicMetricsAttributes)||void 0===c?void 0:c.call(a)};this.newEvent=
function(a,c,d){void 0===d&&(d={});c=n.__assign(n.__assign(n.__assign({},e.defaultAttributes),c),d);c[m.EVENT_TYPE]=a;c[m.METRICS_SEQUENCE_NUMBER]=e.metricsSequenceNumber++;c[m.NETWORK_TYPE]=navigator&&navigator.connection&&navigator.connection.type;return c};this.browserWindow=F().defaultView;this.metricsSequenceNumber=0;this.sushiClient=new $b(f,"SBVClientMetrics");this.defaultAttributes=n.__assign({},b);this.defaultAttributes[m.USER_AGENT]=navigator.userAgent;this.viewMetricOptions=n.__assign(n.__assign({},
Va),h);(f=this.browserWindow&&this.browserWindow.location&&this.browserWindow.location.href)&&(this.defaultAttributes[m.CURRENT_PAGE_URL]=f);b.pageNumber&&(b=parseInt(b.pageNumber,10),isNaN(b)||(this.defaultAttributes[m.PAGE_NUMBER]=b))}}(),Xa=function(b){var f=ya.getStage();switch(b){default:return"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client."+f+".events";case "A1F83G8C2ARO7P":case "A1PA6795UKMFR9":case "A13V1IB3VIYZZH":case "APJ6JRA9NG5V4":case "A3HOBANJMCMD83":case "A1RKKUPIHCS9HS":case "AJZF8LZ1EJVJN":case "A21TJRUUN4KGV":case "A2XZLSVIQ0F4JT":return"https://unagi-eu.amazon.com/1/events/com.amazon.eel.sbv.client."+
f+".eu";case "A1VC38T7YXB528":return"https://unagi-fe.amazon.com/1/events/com.amazon.eel.sbv.client."+f+".fe"}},ac=["motorola edge","Moto"],Ya=function(){return w["default"].capabilities.isAmazonApp?"app":"web"},Za=function(){var b=w["default"].capabilities.android?"android":w["default"].capabilities.ios?"ios":"unrecognized";"unrecognized"===b&&ac.forEach(function(f){navigator.userAgent.includes(f)&&(b="android")});return"desktop"===za()?"unrecognized":b},za=function(){return w["default"].capabilities.mobile?
"mobile":w["default"].capabilities.tablet?"tablet":"desktop"},X;(X||(X={})).SEARCH_GRID="sbv-transition-search-grid";var H;(function(b){b.SEARCH_GRID="sbv-search-grid";b.SINGLE_ELEMENT="single-element"})(H||(H={}));var bc=w["default"].$,ec=function(){function b(){this.strategy={init:this.init,repaint:this.repaint,resize:this.resize}}b.prototype.register=function(){ea["default"].display[H.SEARCH_GRID]||da["default"].registerStrategy("display",H.SEARCH_GRID,this.strategy)};b.prototype.init=function(f){var h=
f.getAttr(v["default"].FIRST_VISIBLE_ITEM);f.setAttr(v["default"].MIN_GUTTER,0);f.setAttr("currentGutter",0);this.repaint(f);1<h&&(h=Math.ceil(h/f.getAttr(v["default"].PAGE_SIZE)),f.gotoPage(h));cc(f)};b.prototype.repaint=function(f){var h=f.getDimensions().viewport.width,e=f.dom.$carousel.children("li").get(0).getBoundingClientRect();e=e.width?e.width:e.right-e.left;var a=dc(f,h,e);var c=f.dom.$carousel;var d=c.children("li"),g=d.length,k=f.getAttr(v["default"].PAGE_SIZE),l=f.getAttr(v["default"].SET_SIZE);
d=d.first().outerWidth(!0);h=k>=l?h:g*d;c.css("width",h+"px");h={carousel:{outerWidth:c.outerWidth(),width:h},items:[]};for(c=0;c<g;c++)h.items.push({outerWidth:d,width:e});f.updateDimensionsCache(h);f.gotoIndex(a,{animationDuration:0,ignorePause:!0});f.triggerEvent("repaint")};b.prototype.resize=function(f,h){h.viewport&&void 0!==h.viewport.width&&this.repaint(f)};b.prototype.getStrategy=function(){return this.strategy};return b}(),cc=function(b){b.onChange(v["default"].PAGE_NUMBER,function(){b.getAttr(v["default"].HIDE_OFF_SCREEN)&&
b.dom.$carousel.children("li").css("visibility","")});b.onChange(v["default"].ANIMATING,function(f){if(!f&&b.getAttr(v["default"].HIDE_OFF_SCREEN)){var h=b.getAttr(v["default"].FIRST_VISIBLE_ITEM)-1;var e=h+b.getAttr(v["default"].PAGE_SIZE)-1;b.dom.$carousel.children("li").each(function(a,c){a=a>=h&&a<=e;bc(c).css("visibility",a?"":"hidden")})}})},dc=function(b,f,h){var e=b.getAttr(v["default"].TOTAL_PAGES),a=b.getAttr(v["default"].PAGE_NUMBER),c=b.getAttr(v["default"].FIRST_VISIBLE_ITEM),d=b.getAttr(v["default"].HIDE_OFF_SCREEN),
g=b.dom.$carousel.children("li");f=fc(b,f,h);var k=(a-1)*f+1;b.setAttr(v["default"].PAGE_SIZE,f);a>e?(c=(e-1)*f+1,b.setAttr(v["default"].PAGE_NUMBER,e),b.setAttr(v["default"].FIRST_VISIBLE_ITEM,c)):c!==k&&(e=Math.ceil(c/f),c=(e-1)*f+1,b.setAttr(v["default"].PAGE_NUMBER,e),b.setAttr(v["default"].FIRST_VISIBLE_ITEM,c));var l=c-1;var p=l+f-1;g.each(function(t,r){r.style.visibility=!d||t>=l&&t<=p?"":"hidden";r.style.width=h+"px"});return c},fc=function(b,f,h){b=0;if(0<h)for(;-.5<f;)b++,f-=h;0>f&&b--;
return w["default"].isFiniteNumber(b)&&0<b?b:1},gc=function(){return function(){var b=this;this.updateRepaint=function(f){f.repaint=function(h){var e=h.getAttr("minimum_gutter_width"),a=h.getAttr("set_size"),c=h.dom.$carousel.children("li"),d=c.width();d-=2*e;c.css({width:d+"px",margin:"0 "+e+"px"});e=d+2*e;c=e*a;h.dom.$carousel.width(c);for(c={carousel:{width:c},items:[]};a--;)c.items[a]={width:d,outerWidth:e};h.updateDimensionsCache(c);h.gotoIndex(h.getAttr("firstVisibleItem"),{animationDuration:0,
ignorePause:!0});h.triggerEvent("repaint")}};this.getStrategy=function(){return b.strategy};this.register=function(){ea["default"].display[H.SINGLE_ELEMENT]||da["default"].registerStrategy("display",H.SINGLE_ELEMENT,b.strategy)};this.strategy=w["default"].copy(ea["default"].display.single);this.updateRepaint(this.strategy)}}(),hc=function(){function b(){}b.registerStrategy=function(f){switch(f){case H.SEARCH_GRID:(new ec).register();break;case H.SINGLE_ELEMENT:(new gc).register();break;default:throw Error("Invalid carousel Strategy type");
}};return b}(),kc=function(){return function(){var b=this;this.register=function(){ea["default"].transition[X.SEARCH_GRID]||da["default"].registerStrategy("transition",X.SEARCH_GRID,b.strategy)};this.gotoPage=function(f,h,e){var a=f.getAttr(v["default"].TOTAL_PAGES),c=f.getAttr(v["default"].CIRCULAR),d=f.getAttr(v["default"].PAGE_SIZE),g=f.getAttr(v["default"].SET_SIZE),k=d*(h-1)+1;e=e||{};$a(f,e);0<h&&h<=a&&f.setAttr(v["default"].PAGE_NUMBER,h);!c&&1>h?(h=1,e.animationDuration=NaN):!c&&h>a&&(h=a,
e.animationDuration=Math.pow(f.getAttr(v["default"].ANIMATION_SPEED),f.getAttr(v["default"].SPRINGINESS)));h===a&&(k=Math.min(k,g-d+1));b.gotoIndex(f,k,e)};this.gotoIndex=function(f,h,e){e=e||{};$a(f,e);var a=f.getAttr(v["default"].CIRCULAR)&&!f.getAttr(v["default"].CURRENTLY_WRAPPING);var c=e.callback;var d=null;var g=f.getViewportWidth();ic(f,h);f.setAttr(v["default"].FIRST_VISIBLE_ITEM,h);if(1>h){if(a){d=-g;var k=function(){c&&c();b.wrapToLast(f)}}}else h>f.getAttr(v["default"].SET_SIZE)?a&&(d=
f.getAttr(v["default"].CURRENT_PIXEL)+g,k=function(){c&&c();b.wrapToFirst(f)}):d=f.getItemOffset(h);jc(f,e,k,c);null!==d&&b.strategy.gotoPixel(f,d,e)};this.getStrategy=function(){return b.strategy};this.strategy=w["default"].copy(ea["default"].transition.slideHorizontal);this.strategy.gotoPage=this.gotoPage;this.strategy.gotoIndex=this.gotoIndex}}(),ic=function(b,f){var h=b.getAttr(v["default"].TOTAL_PAGES),e=b.getAttr(v["default"].PAGE_NUMBER),a=b.getAttr(v["default"].PAGE_SIZE),c=b.getAttr(v["default"].SET_SIZE),
d=Math.ceil(f/a);f===c-a+1&&d!==e&&(d=h);d!==e&&0<d&&d<=h&&b.setAttr(v["default"].PAGE_NUMBER,d)},$a=function(b,f){(void 0===f.animationDuration||0<f.animationDuration)&&!f.silent&&b.setAttr(v["default"].ANIMATING,!0)},jc=function(b,f,h,e){h?(b.setAttr(v["default"].CURRENTLY_WRAPPING,!0),f.callback=h,f.easingFunction=f.easingFunction||b.getAttr(v["default"].WRAP_EASING),f.animationSpeed=1.3*(w["default"].isFiniteNumber(f.animationSpeed)?f.animationSpeed:b.getAttr(v["default"].ANIMATION_SPEED))):f.callback=
e},lc=function(){function b(){}b.registerStrategy=function(f){switch(f){case X.SEARCH_GRID:(new kc).register();break;default:throw Error("Invalid carousel Strategy type");}};return b}(),K;(function(b){b.CARD_ITEM='[data-type="mbvItem"]';b.BRAND_CONTAINER='[data-type="brandContainer"]';b.BRAND_LOGO_HEADER_CONTAINER='[data-type="brandedLogoHeaderContainer"]'})(K||(K={}));var T;(T||(T={})).SEARCH_GRID="searchGrid";var ia;(function(b){b.BrandVideoProduct="BrandVideoProduct";b.BrandVideoStore="BrandVideoStore"})(ia||
(ia={}));var Q=function(){function b(){}b.navigatorInternal=navigator;b.isIOS=function(){return w["default"].capabilities.ios};b.isIOSWebView=function(){return w["default"].capabilities.isAmazonApp&&w["default"].capabilities.ios};b.isWebView=function(){return w["default"].capabilities.isAmazonApp};b.isSafari=function(){return!(!b.navigatorInternal.vendor||!b.navigatorInternal.vendor.match(/apple/i))};return b}(),ab=function(){return function(b,f,h,e){var a=this;this.viewMetricsHistoryMap={isViewedLogged:!1,
isAdUnitViewedLogged:!1,isProgressFiveSecondsLogged:!1,isFirstQuartileLogged:!1,isMidpointLogged:!1,isThirdQuartileLogged:!1,isCompleteLogged:!1,isUnmuteLogged:!1};this.onVideoTimeUpdated=function(c,d,g){var k=a.adUnitManager?g:c,l=0;a.adUnitManager&&(l=a.adUnitManager.calculateVideoDurationTotalMsRelativeToAdUnit(g));!a.viewMetricsHistoryMap.isAdUnitViewedLogged&&2E3<=l&&(a.viewMetricsHistoryMap.isAdUnitViewedLogged=!0,a.metricsManager.reportViewMetricsAdUnitViewed(a.videoAdAttributes));!a.viewMetricsHistoryMap.isViewedLogged&&
2E3<=k&&(a.viewMetricsHistoryMap.isViewedLogged=!0,a.metricsManager.reportViewMetricsVideoViewed(a.videoAdAttributes));!a.viewMetricsHistoryMap.isProgressFiveSecondsLogged&&5E3<=c&&(a.viewMetricsHistoryMap.isProgressFiveSecondsLogged=!0,a.metricsManager.reportViewMetricsVideoProgressFiveSeconds(a.videoAdAttributes));!a.viewMetricsHistoryMap.isFirstQuartileLogged&&c>=.25*d&&(a.viewMetricsHistoryMap.isFirstQuartileLogged=!0,a.metricsManager.reportViewMetricsVideoFirstQuartile(a.videoAdAttributes));
!a.viewMetricsHistoryMap.isMidpointLogged&&c>=.5*d&&(a.viewMetricsHistoryMap.isMidpointLogged=!0,a.metricsManager.reportViewMetricsVideoMidpoint(a.videoAdAttributes));!a.viewMetricsHistoryMap.isThirdQuartileLogged&&c>=.75*d&&(a.viewMetricsHistoryMap.isThirdQuartileLogged=!0,a.metricsManager.reportViewMetricsVideoThirdQuartile(a.videoAdAttributes))};this.onVideoReadyForPlayback=function(c,d,g,k){a.metricsManager.reportVideoReadyForPlayback(c,d,g,a.videoAdAttributes,k)};this.onTimeToFirstFrame=function(c,
d,g){a.metricsManager.reportTimeToFirstFrame(c,d,g,a.videoAdAttributes)};this.onVideoPlaybackFailure=function(c,d,g){a.metricsManager.reportVideoPlaybackFailure(c,g,d,a.videoAdAttributes)};this.onVideoPlaying=function(c,d,g){a.metricsManager.reportVideoPlaybackStarted(c,d,g,a.videoAdAttributes)};this.onVideoPlaybackPaused=function(c,d,g){a.metricsManager.reportVideoPaused(c,d,g,a.videoAdAttributes)};this.onPlaybackCompleted=function(c,d){a.viewMetricsHistoryMap.isCompleteLogged||(a.viewMetricsHistoryMap.isCompleteLogged=
!0,a.metricsManager.reportViewMetricsVideoComplete(a.videoAdAttributes));a.metricsManager.reportPlaybackCompleted(c,d,a.videoAdAttributes);if(a.eventHandlerOptions&&a.eventHandlerOptions.onPlaybackCompletedCallback)a.eventHandlerOptions.onPlaybackCompletedCallback()};this.onVideoBufferingStarted=function(c,d,g){a.bufferStartTimeMs=c;a.metricsManager.reportVideoBufferingStarted(c,d,g,a.videoAdAttributes)};this.onVideoBufferingEnded=function(c,d,g){a.bufferStartTimeMs=0;a.metricsManager.reportVideoBufferingEnded(c,
d,g,a.videoAdAttributes)};this.onVideoPlaybackFailedAfterPlayError=function(){a.metricsManager.reportPlaybackFailedToStartAfterPlay(a.videoAdAttributes)};this.onVideoAborted=function(c){a.metricsManager.reportVideoAborted(c,a.videoAdAttributes)};this.onVideoSuspended=function(c){a.metricsManager.reportVideoSuspended(c,a.videoAdAttributes)};this.onVideoPlayPromiseRejected=function(c){a.metricsManager.reportVideoPlayPromiseRejected(c,a.videoAdAttributes)};this.onVideoPlayPromiseNotSupported=function(){a.metricsManager.reportVideoPlayPromiseNotSupported(a.videoAdAttributes)};
this.onVideoMuted=function(c,d){a.metricsManager.reportVideoSoundOff(c,d,a.videoAdAttributes)};this.onVideoUnmuted=function(c,d){a.viewMetricsHistoryMap.isUnmuteLogged||(a.viewMetricsHistoryMap.isUnmuteLogged=!0,a.metricsManager.reportViewMetricsVideoUnmute(a.videoAdAttributes));a.metricsManager.reportVideoSoundOn(c,d,a.videoAdAttributes)};this.onCcOn=function(c,d,g){a.metricsManager.reportCaptionsOn(c,a.videoAdAttributes,d,g)};this.onCcOff=function(c,d,g){a.metricsManager.reportCaptionsOff(c,a.videoAdAttributes,
d,g)};this.onCcLoadFailure=function(){a.metricsManager.reportCaptionsLoadFailure(a.videoAdAttributes)};this.onVideoDurationPlayed=function(c,d,g){a.metricsManager.reportVideoDurationPlayed(c,d,g,a.videoAdAttributes)};this.onVideoClicked=function(c){var d;a.metricsManager.reportVideoClicked(c,a.videoAdAttributes);if(null===(d=a.eventHandlerOptions)||void 0===d?0:d.onImmersiveVideoCallback)a.eventHandlerOptions.onImmersiveVideoCallback(a.videoAdAttributes)};this.onVideoOnScreen=function(c){a.metricsManager.reportVideoOnScreen(c,
a.videoAdAttributes)};this.onVideoOffScreen=function(c,d){a.metricsManager.reportVideoOffScreen(c,0!==a.bufferStartTimeMs,d,a.videoAdAttributes)};this.onVideoPlaybackInitiated=function(c){a.metricsManager.reportVideoPlaybackInitiated(c,a.videoAdAttributes)};this.onVideoPlayFromPause=function(c){a.metricsManager.reportVideoPlayFromPause(c,a.videoAdAttributes)};this.onVideoPauseInitiated=function(c){a.metricsManager.reportVideoPauseInitiated(c,a.videoAdAttributes)};this.onProgressBarReset=function(){a.metricsManager.reportProgressBarReset(a.videoAdAttributes)};
this.onVideoPauseButtonTriggered=function(c){a.metricsManager.reportVideoPauseButtonTriggered(c,a.videoAdAttributes)};this.onVideoViewed=function(c){a.metricsManager.reportVideoView(c,Q.isIOSWebView(),a.videoAdAttributes)};this.onAudioToggleIconDisplayed=function(){a.metricsManager.reportAudioToggleIconDisplayed(a.videoAdAttributes)};this.onPauseIconDisplayed=function(){a.metricsManager.reportPauseIconDisplayed(a.videoAdAttributes)};this.onProgressBarDisplayed=function(){a.metricsManager.reportProgressBarDisplayed(a.videoAdAttributes)};
this.metricsManager=b;this.videoAdAttributes=f;this.bufferStartTimeMs=0;this.eventHandlerOptions=h;this.adUnitManager=e}}(),bb=function(){return function(b,f){var h=this;this.reportIfBoundaryCrossed=function(e,a,c,d,g){h.isValidBoundaryTime(c)&&(e<=a?h.insideInterval(e,a)&&h.callback(h.boundaryTime,d,g):(h.insideInterval(0,a)||h.insideInterval(e,c))&&h.callback(h.boundaryTime,d,g))};this.insideInterval=function(e,a){return h.boundaryTime>e&&h.boundaryTime<=a};this.isValidBoundaryTime=function(e){return 0<=
h.boundaryTime&&h.boundaryTime<=e};this.boundaryTime=b;this.callback=f}}(),C;(function(b){b.PLAYING="playing";b.PAUSED="paused";b.BUFFERING="buffering";b.INITIATED="initiated";b.END="ended"})(C||(C={}));var mc=function(){return function(b,f,h,e){var a=this;void 0===h&&(h=[]);void 0===e&&(e=[]);this.play=function(c){a.initiatedPlayTime||(a.initiatedPlayTime=c);return a.playbackState!==C.PLAYING&&a.videoElement.paused?(c=a.playInternal())?c:Promise.reject("NotSupported"):Promise.resolve()};this.pause=
function(){a.playbackState!==C.PAUSED&&a.playbackState===C.PLAYING&&(a.playbackState=C.PAUSED,a.videoElement.pause())};this.seekToStart=function(){a.accrueContinuousPlaybackDuration(a.getCurrentTimeMs());a.lastOnTimeUpdateCurrentTimeMs=0;a.videoElement.currentTime=0};this.mute=function(){a.videoElement.muted=!0};this.unmute=function(){a.videoElement.muted=!1};this.isMuted=function(){return a.videoElement.muted};this.toggleCaptions=function(c){a.videoElement.textTracks[0].mode=c?"showing":"hidden"};
this.getCaptionLang=function(){return null!=a.videoElement.textTracks[0].language?a.videoElement.textTracks[0].language:"No Language Given"};this.getCurrentTimeMs=function(){return Math.round(1E3*a.videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*a.videoElement.duration)};this.getDroppedFrames=function(){return a.videoElement.getVideoPlaybackQuality?a.videoElement.getVideoPlaybackQuality().droppedVideoFrames:void 0!==a.videoElement.webkitDroppedFrameCount?a.videoElement.webkitDroppedFrameCount:
-1};this.getContinuousPlaybackDurationMs=function(){return a.continuousDurationAccruedPlayTimeMs+(a.getCurrentTimeMs()-a.continuousDurationStartTimeMs)};this.resetContinuousPlaybackDurationMs=function(){var c=a.getCurrentTimeMs();a.continuousDurationAccruedPlayTimeMs=0;c===a.getDurationMs()?a.continuousDurationStartTimeMs=0:a.continuousDurationStartTimeMs=c;a.continuousDurationBoundaryChecks.forEach(function(d){d.resetReported()})};this.getPercentDownloaded=function(){var c=a.videoElement.buffered;
if(!c)return 0;for(var d=0,g=0;g<c.length;g++)d+=c.end(g)-c.start(g);return d/a.videoElement.duration};this.load=function(){a.videoElement.load()};this.getDateTime=function(){return Date.now()};this.playInternal=function(){return a.videoElement.play()};this.videoOnCanPlayEvent=function(){if(!a.assetLoaded){var c=a.getDateTime()-a.loadStartTime;a.eventHandler.onVideoReadyForPlayback(c,a.retryLoadCount,a.getPercentDownloaded(),a.getDurationMs());a.assetLoaded=!0}};this.videoOnErrorEvent=function(){!a.assetLoaded&&
3>a.retryLoadCount?(a.retryLoadCount++,setTimeout(a.videoElement.load.bind(a.videoElement),2E3)):a.handleVideoPlaybackFailureEvent()};this.videoOnPlayingEvent=function(){a.handleFirstFramePlayedEvent();if(a.playbackState===C.BUFFERING)a.eventHandler.onVideoBufferingEnded(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());if(a.playbackState!==C.END)a.eventHandler.onVideoPlaying(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());a.playbackState=C.PLAYING};this.videoOnPauseEvent=
function(){a.videoElement.currentTime!==a.videoElement.duration&&(a.playbackState=C.PAUSED,a.eventHandler.onVideoPlaybackPaused(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames()))};this.videoOnEndedEvent=function(){return n.__awaiter(a,void 0,void 0,function(){return n.__generator(this,function(c){switch(c.label){case 0:return this.playbackState=C.END,this.accrueContinuousPlaybackDuration(this.getDurationMs()),this.eventHandler.onPlaybackCompleted(this.getDurationMs(),this.getDroppedFrames()),
this.videoElement.dataset.disableLooping&&"false"!==this.videoElement.dataset.disableLooping?[3,2]:[4,this.playInternal()];case 1:c.sent(),c.label=2;case 2:return[2]}})})};this.videoOnWaitingEvent=function(){a.playbackState=C.BUFFERING;a.eventHandler.onVideoBufferingStarted(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames())};this.videoOnTimeUpdateEvent=function(){var c=a.getCurrentTimeMs(),d=a.getContinuousPlaybackDurationMs();a.continuousDurationBoundaryChecks.forEach(function(g){g.reportIfBoundaryCrossed(d)});
a.boundaryChecks.forEach(function(g){g.reportIfBoundaryCrossed(a.lastOnTimeUpdateCurrentTimeMs,c,a.getDurationMs(),a.getPercentDownloaded(),a.getDroppedFrames())});a.lastOnTimeUpdateCurrentTimeMs=c;a.eventHandler.onVideoTimeUpdated(c,a.getDurationMs(),d)};this.videoOnAbortEvent=function(){a.eventHandler.onVideoAborted(a.getCurrentTimeMs())};this.videoOnSuspendEvent=function(){a.eventHandler.onVideoSuspended(a.getCurrentTimeMs())};this.handleFirstFramePlayedEvent=function(){if(!a.firstFramePlayed){var c=
a.getDateTime()-a.initiatedPlayTime;a.eventHandler.onTimeToFirstFrame(c,a.getPercentDownloaded(),a.getDroppedFrames());a.firstFramePlayed=!0}};this.handleVideoPlaybackFailureEvent=function(){if(a.videoElement.error){var c=a.translateVideoErrorCode(a.videoElement.error.code);a.eventHandler.onVideoPlaybackFailure(a.getCurrentTimeMs(),c,a.videoElement.error.message)}};this.translateVideoErrorCode=function(c){switch(c){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";
case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return c?c.toString():"UNKNOWN"}};this.accrueContinuousPlaybackDuration=function(c){a.continuousDurationAccruedPlayTimeMs+=c-a.continuousDurationStartTimeMs;a.continuousDurationStartTimeMs=0};this.videoElement=b;this.eventHandler=f;this.lastOnTimeUpdateCurrentTimeMs=this.continuousDurationAccruedPlayTimeMs=this.continuousDurationStartTimeMs=0;this.boundaryChecks=h;this.continuousDurationBoundaryChecks=e;this.playbackState=C.INITIATED;this.loadStartTime=
this.getDateTime();this.assetLoaded=!1;this.retryLoadCount=0;this.firstFramePlayed=!1;this.videoElement.oncanplay=this.videoOnCanPlayEvent;this.videoElement.onerror=this.videoOnErrorEvent;this.videoElement.onplaying=this.videoOnPlayingEvent;this.videoElement.onpause=this.videoOnPauseEvent;this.videoElement.onended=this.videoOnEndedEvent;this.videoElement.onwaiting=this.videoOnWaitingEvent;this.videoElement.ontimeupdate=this.videoOnTimeUpdateEvent;this.videoElement.onabort=this.videoOnAbortEvent;this.videoElement.onsuspend=
this.videoOnSuspendEvent;4===this.videoElement.readyState&&(this.eventHandler.onVideoReadyForPlayback(0,0,this.getPercentDownloaded(),this.getDurationMs()),this.assetLoaded=!0);if(this.videoElement.error&&this.videoElement.error.code)this.videoElement.onerror("TriggeredBeforeInit");b=this.videoElement.dataset.poster;this.videoElement.poster!==b&&(this.videoElement.poster=b)}}(),nc=function(){function b(){}b.getPercentInView=function(f,h){var e=F().defaultView;try{var a=e.innerWidth||e.clientWidth||
0,c=e.innerHeight||e.clientHeight||0,d=b.getNormalizedBoundingRect(f),g=b.getViewableSegment(d.top,d.bottom,c),k=b.getViewableSegment(d.left,d.right,a);f=void 0;f=(null===h||void 0===h?0:h.shouldAreaOnlyUseElementWidth)?d.width:Math.min(d.width,a);return g*k/(d.height*f)}catch(l){return 0}};b.getViewableSegment=function(f,h,e){return f>e&&h>e?0:Math.min(0<f?e-f:0<h?Math.min(h,e):0,h-f)};b.getNormalizedBoundingRect=function(f){f=f.getBoundingClientRect();f.height=f.height||f.bottom-f.top;f.width=f.width||
f.right-f.left;return f};return b}(),Y=function(){function b(){}b.registeredElements=[];b.attachedToViewWillDisappear=!1;b.registerElement=function(f,h,e,a,c,d,g,k){f={callback:d,dispatchOnElementInView:e,dispatchOnElementOutOfView:a,element:f,isInView:void 0,ratioInView:h,recurring:c,eventData:g,options:k};0===b.registeredElements.length&&b.attachListeners();b.registeredElements.push(f);b.handleViewChange(f)};b.deregisterElement=function(f,h,e,a,c){b.registeredElements=b.registeredElements.filter(function(d){return!(d.element===
f&&d.ratioInView===h&&d.dispatchOnElementInView===e&&d.dispatchOnElementOutOfView===a&&d.recurring===c)});0===b.registeredElements.length&&b.detachListeners()};b.emitViewabilityChange=function(f,h){f.isInView=h;f.callback(f.ratioInView,h,f.eventData);f.recurring||b.deregisterElement(f.element,f.ratioInView,f.dispatchOnElementInView,f.dispatchOnElementOutOfView,f.recurring)};b.handleRatioInViewChange=function(f,h){f.dispatchOnElementInView&&h>=f.ratioInView&&!f.isInView&&b.emitViewabilityChange(f,
!0);f.dispatchOnElementOutOfView&&h<f.ratioInView&&f.isInView&&b.emitViewabilityChange(f,!1)};b.handleBrowserHidden=function(f){b.handleRatioInViewChange(f,0)};b.handleViewChange=function(f){b.handleRatioInViewChange(f,nc.getPercentInView(f.element,f.options))};b.onBrowserHidden=function(){b.registeredElements.forEach(b.handleBrowserHidden)};b.onBrowserShown=function(){b.registeredElements.forEach(b.handleViewChange)};b.onBrowserVisibilityChange=function(){if(F().hidden)b.onBrowserHidden();else setTimeout(b.onBrowserShown,
50)};b.toggleBrowserVisibility=function(){b.onBrowserHidden();b.onBrowserShown()};b.attachListeners=function(){b.throttledOnBrowserViewChange||(b.throttledOnBrowserViewChange=w["default"].throttle(function(){b.registeredElements.forEach(b.handleViewChange)},50));w["default"].on("afterReady",b.throttledOnBrowserViewChange);w["default"].on(w["default"].constants.BROWSER_EVENTS.SCROLL,b.throttledOnBrowserViewChange);w["default"].on(w["default"].constants.BROWSER_EVENTS.RESIZE,b.throttledOnBrowserViewChange);
w["default"].on(w["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,b.throttledOnBrowserViewChange);var f=F().defaultView;B.addEventListener(f,"beforeunload",1,b.onBrowserHidden);B.addEventListener(F(),"visibilitychange",1,b.onBrowserVisibilityChange);Q.isWebView()||(B.addEventListener(f,"focus",1,b.onBrowserShown),B.addEventListener(f,"blur",1,b.onBrowserHidden));Q.isSafari()&&!Q.isWebView()&&(B.addEventListener(f,"pagehide",1,b.onBrowserHidden),B.addEventListener(f,"pageshow",1,b.onBrowserShown),
B.addEventListener(f,"popstate",1,b.toggleBrowserVisibility));b.attachToViewWillDisappear()};b.detachListeners=function(){w["default"].off("afterReady",b.throttledOnBrowserViewChange);w["default"].off(w["default"].constants.BROWSER_EVENTS.SCROLL,b.throttledOnBrowserViewChange);w["default"].off(w["default"].constants.BROWSER_EVENTS.RESIZE,b.throttledOnBrowserViewChange);w["default"].off(w["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,b.throttledOnBrowserViewChange);var f=F().defaultView;B.removeEventListener(F(),
"visibilitychange",1,b.onBrowserVisibilityChange);B.removeEventListener(f,"beforeunload",1,b.onBrowserHidden);Q.isWebView()||(B.removeEventListener(f,"focus",1,b.onBrowserShown),B.removeEventListener(f,"blur",1,b.onBrowserHidden));Q.isSafari()&&!Q.isWebView()&&(B.removeEventListener(f,"pagehide",1,b.onBrowserHidden),B.removeEventListener(f,"pageshow",1,b.onBrowserShown),B.removeEventListener(f,"popstate",1,b.toggleBrowserVisibility))};b.attachToViewWillDisappear=function(){if(!b.attachedToViewWillDisappear){var f=
F().defaultView;b.attachedToViewWillDisappear=!0;f.app||(f.app={});b.previousViewWillDisappear=f.app.willDisappear;f.app.willDisappear=function(){b.onBrowserHidden();b.previousViewWillDisappear&&b.previousViewWillDisappear()}}};return b}(),L;(function(b){b.WAITING="waiting";b.TIME_UPDATE="timeupdate";b.PAUSE="pause"})(L||(L={}));var cb=function(){return function(b,f,h,e,a,c){var d=this;void 0===e&&(e=!1);void 0===a&&(a=!1);void 0===c&&(c={});this.getVideoCurrentTimeMs=function(){return d.videoPlayer.getCurrentTimeMs()};
this.getTotalVideoDuration=function(){return d.videoPlayer.getDurationMs()};this.setMuteStatus=function(g,k){d.isMuted=g;d.setMuteButtonStatus(g);d.muteClickRegion&&(g?(d.videoPlayer.mute(),d.videoEventHandler.onVideoMuted(d.getVideoCurrentTimeMs(),k)):(d.videoPlayer.unmute(),d.videoEventHandler.onVideoUnmuted(d.getVideoCurrentTimeMs(),k)))};this.displayProgressBar=function(g){if(d.progressBarContainer&&(d.progressBarContainer.style.visibility=g?"inherit":"hidden",g))d.videoEventHandler.onProgressBarDisplayed()};
this.play=function(){if(d.isPlaying())return Promise.resolve();d.videoPlayer.resetContinuousPlaybackDurationMs();d.videoEventHandler.onVideoPlaybackInitiated(d.getVideoCurrentTimeMs());d.showPlayButton(!1);d.showPauseButton(!0);d.displayProgressBar(!0);d.muteClickRegion&&(d.muteClickRegion.style.display="block",d.videoEventHandler.onAudioToggleIconDisplayed(),d.muteClickRegion.style.visibility="visible");if(d.ccTrack){d.ccTrack.onerror=d.ccLoadFailure;d.ccShowing=!1;if(d.ccTrackFail)d.ccLoadFailure();
else if(d.ccClickRegion)d.ccClickRegion.style.display="block",d.ccClickRegion.style.visibility="visible",d.videoEventHandler.onCcOn(W.DEFAULT_ON,d.videoPlayer.getCaptionLang(),!1);else d.videoEventHandler.onCcOn(W.DEFAULT_ON,d.videoPlayer.getCaptionLang(),!0);d.toggleCC()}return d.videoPlayer.play(Date.now()).then().catch(function(g){var k="string"===typeof g?g:"";g instanceof DOMException&&(k=g.name+": "+g.message);d.showPlayButton(!0);d.muteClickRegion&&(d.muteClickRegion.style.visibility="hidden");
d.ccClickRegion&&(d.ccClickRegion.style.visibility="hidden");if(k.startsWith("NotSupported"))d.videoEventHandler.onVideoPlayPromiseNotSupported();d.videoEventHandler.onVideoPlayPromiseRejected(k)})};this.pause=function(g){d.isPaused()||(d.videoEventHandler.onVideoPauseInitiated(d.getVideoCurrentTimeMs()),d.videoEventHandler.onVideoViewed(d.videoPlayer.getContinuousPlaybackDurationMs()),d.videoPlayer.resetContinuousPlaybackDurationMs(),d.showPauseButton(!1),d.videoOptions.shouldEnablePauseButton?d.displayProgressBar(!0):
d.displayProgressBar(!1),!g&&d.videoOptions.shouldEnablePlayButton&&d.showPlayButton(!0),d.muteClickRegion&&(d.muteClickRegion.style.visibility="hidden"),d.ccTrack&&(d.ccClickRegion&&(d.ccClickRegion.style.visibility="hidden"),d.toggleCC()),d.videoPlayer.pause())};this.onOnePercentViewabilityChange=function(g,k){g=Date.now();k?(d.onScreenStartTime=g,d.videoEventHandler.onVideoOnScreen(d.videoPlayer.getPercentDownloaded())):(d.videoPlayer.isMuted()||d.setMuteStatus(!0,J.VIDEO_OFF_SCREEN),d.videoEventHandler.onVideoOffScreen(g-
d.onScreenStartTime,d.getVideoCurrentTimeMs()),d.onScreenStartTime=0,d.videoPlayer.seekToStart(),d.videoPlayer.resetContinuousPlaybackDurationMs())};this.onFiftyPercentViewabilityChange=function(g,k,l){k?d.play().catch():d.pause(l)};this.setVideoOptions=function(g){d.videoOptions=g};this.isPlaying=function(){return d.videoPlayer.playbackState===C.PLAYING};this.isPaused=function(){return d.videoPlayer.playbackState===C.PAUSED};this.buildBoundaryListeners=function(){return[new bb(2E3,d.videoEventHandler.onVideoDurationPlayed),
new bb(15E3,d.videoEventHandler.onVideoDurationPlayed)]};this.toggleAudio=function(){d.setMuteStatus(!d.videoPlayer.isMuted(),J.ICON_TAP)};this.toggleCC=function(){d.ccShowing=!d.ccShowing;d.videoPlayer.toggleCaptions(d.ccShowing);d.ccButtonOff&&d.ccButtonOn&&(d.ccShowing?(d.videoEventHandler.onCcOn(W.ICON_TAP,d.videoPlayer.getCaptionLang(),!1),d.ccButtonOn.style.opacity="1",d.ccButtonOff.style.opacity="0"):(d.videoEventHandler.onCcOff(W.ICON_TAP,d.videoPlayer.getCaptionLang(),!1),d.ccButtonOn.style.opacity=
"0",d.ccButtonOff.style.opacity="1"))};this.showPlayButton=function(g){d.playClickRegion&&(d.playClickRegion.style.visibility=g?"inherit":"hidden")};this.showPauseButton=function(g){if(d.pauseClickRegion&&(d.pauseClickRegion.style.visibility=g?"inherit":"hidden",g))d.videoEventHandler.onPauseIconDisplayed()};this.setUpPlayButtonEvents=function(){d.playClickRegion&&d.playClickRegion.addEventListener("click",function(){d.play();d.playButtonClicked=!0;if(d.playButtonClicked&&d.pauseButtonClicked)d.videoEventHandler.onVideoPlayFromPause(d.getVideoCurrentTimeMs())})};
this.setUpPauseButtonEvents=function(){d.pauseClickRegion&&d.pauseClickRegion.addEventListener("click",function(){d.pause();d.pauseButtonClicked=!0;d.videoEventHandler.onVideoPauseButtonTriggered(d.getVideoCurrentTimeMs())})};this.ccLoadFailure=function(){d.ccTrackFail=!0;d.videoEventHandler.onCcLoadFailure();d.ccClickRegion&&(d.ccClickRegion.style.visibility="hidden")};this.setMuteButtonStatus=function(g){d.muteButton&&d.unmuteButton&&(g?(d.unmuteButton.style.fillOpacity="0",d.muteButton.style.fillOpacity=
"1"):(d.muteButton.style.fillOpacity="0",d.unmuteButton.style.fillOpacity="1"))};this.logClick=function(){d.videoEventHandler.onVideoClicked(d.getVideoCurrentTimeMs())};this.updateProgressBar=function(g){if(d.progressBar)if(g===L.WAITING||g===L.PAUSE)d.progressBar.style.transition="none";else{g=d.getVideoCurrentTimeMs();var k=d.getTotalVideoDuration(),l=Math.floor(g/k*100);if(0===l)d.videoEventHandler.onProgressBarReset();else l=Math.floor((g+500)/k*100);g=100<l?100:l;d.progressBar.style.transition=
0===g?"none":"width 0.5s linear";d.progressBar.style.width=g+"%"}};this.element=b;this.videoAdAttributes=h;this.videoEventHandler=f;f=this.videoOptions=c;b=f.shouldEnablePlayButton;f=f.shouldEnablePauseButton;h=this.element.querySelector("video");c=this.buildBoundaryListeners();this.videoPlayer=new mc(h,this.videoEventHandler,c);a||this.videoPlayer.load();this.element.querySelectorAll("a").forEach(function(g){g.addEventListener("click",d.logClick)});if(this.muteClickRegion=this.element.querySelector('[data-type="audioToggleContainer"]'))this.muteButton=
this.muteClickRegion.querySelector('[data-type="audioToggleMute"]'),this.unmuteButton=this.muteClickRegion.querySelector('[data-type="audioToggleUnmute"]'),this.setMuteButtonStatus(this.videoPlayer.isMuted()),this.muteClickRegion.addEventListener("click",this.toggleAudio),this.isMuted=this.videoPlayer.isMuted();this.ccTrackFail=!1;if(this.ccTrack=this.element.querySelector('[data-type="ccTrack"]'))this.ccTrack.onerror=this.ccLoadFailure;if(this.ccClickRegion=this.element.querySelector('[data-type="ccToggleContainer"]'))this.ccClickRegion.style.visibility=
"hidden",this.ccButtonOff=this.ccClickRegion.querySelector('[data-type="ccToggleOff"]'),this.ccButtonOn=this.ccClickRegion.querySelector('[data-type="ccToggleOn"]'),this.ccClickRegion.addEventListener("click",this.toggleCC);this.playClickRegion=this.element.querySelector('[data-type="playIcon"]');f&&(this.videoOptions.shouldEnablePlayButton=!0,this.setUpPlayButtonEvents(),this.pauseClickRegion=this.element.querySelector('[data-type="pauseIcon"]'),this.setUpPauseButtonEvents());this.showPlayButton(b);
this.progressBar=this.element.querySelector('[data-type="progressBar"]');this.progressBarContainer=this.element.querySelector('[data-type="progressBarContainer"]');this.progressBar&&h&&(h.addEventListener(L.TIME_UPDATE,function(){return d.updateProgressBar(L.TIME_UPDATE)}),h.addEventListener(L.WAITING,function(){return d.updateProgressBar(L.WAITING)}),f&&h.addEventListener(L.PAUSE,function(){return d.updateProgressBar(L.PAUSE)}));e||(Y.registerElement(h,.5,!0,!0,!0,this.onFiftyPercentViewabilityChange),
Y.registerElement(h,.01,!0,!0,!0,this.onOnePercentViewabilityChange))}}(),oc=function(b){return 9<b?String(b):"0"+b},db=function(b){if(0>=b)return"00:00";var f=Math.floor(b/36E5);b=[Math.floor(b/6E4%60),Math.floor(b/1E3%60)];0<f&&b.unshift(f);return b.map(oc).join(":")},pc=function(){function b(f){this.timerElement=f;this.msToEvent=parseInt(f.dataset.targetTime,10);this.timerElement.innerText=db(this.msToEvent)}b.prototype.start=function(){var f=this;isNaN(this.msToEvent)||(this.counterStartTime=
Date.now(),this.counterInterval=Ib.interval(function(){return f.updateTime()},500))};b.prototype.updateTime=function(){var f=Date.now()-this.counterStartTime;0>=this.msToEvent-f&&clearInterval(this.counterInterval);this.timerElement.innerText=db(this.msToEvent-f)};return b}(),eb=function(b){Array.prototype.slice.call(b.getElementsByClassName("badge-countdown-timer")).forEach(function(f){0===(null===f||void 0===f?void 0:f.innerHTML.length)&&(new pc(f)).start()})},fb=function(){return function(b,f,
h){var e=this;this.onBackgroundClicked=function(){e.metricsManager.reportBackgroundClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onCtaClicked=function(){e.metricsManager.reportBrandCtaLinkClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onHeadlineClicked=function(){e.metricsManager.reportHeadlineClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onBrandCtaLinkClicked=function(){e.metricsManager.reportBrandCtaLinkClicked(e.videoManager.getVideoCurrentTimeMs(),
e.videoManager.videoAdAttributes)};this.onBrandLogoClicked=function(){e.metricsManager.reportBrandLogoClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.productReceived=function(a){var c;void 0===a&&(a=0);var d=(null===(c=e.widgetEventAttributes)||void 0===c?0:c.productAttributes)&&0<e.widgetEventAttributes.productAttributes.length?e.widgetEventAttributes.productAttributes[a]:void 0;e.metricsManager.reportProductReceived(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes,
d)};this.onProductClicked=function(a){var c;void 0===a&&(a=0);var d=(null===(c=e.widgetEventAttributes)||void 0===c?0:c.productAttributes)&&0<e.widgetEventAttributes.productAttributes.length?e.widgetEventAttributes.productAttributes[a]:void 0;e.metricsManager.reportProductClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes,d)};this.metricsManager=b;this.videoManager=f;this.widgetEventAttributes=h}}(),gb=function(){function b(f,h){var e=this;this.setupBackgroundEvent=function(){e.widgetElements.backgroundElement&&
e.widgetElements.backgroundElement.addEventListener("click",e.widgetEventHandler.onBackgroundClicked)};this.setupBrandLogoEvent=function(){e.widgetElements.brandLogoElement&&e.widgetElements.brandLogoElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onBrandLogoClicked)});e.widgetElements.brandElement&&e.widgetElements.brandElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onBrandCtaLinkClicked)})};this.setupCallToActionEvent=
function(){e.widgetElements.callToActionElement&&e.widgetElements.callToActionElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onCtaClicked)})};this.setupHeadlineEvent=function(){e.widgetElements.headlineElement&&e.widgetElements.headlineElement.querySelectorAll("*").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onHeadlineClicked)})};this.setupProductEvents=function(){e.widgetElements.productElements&&e.widgetElements.productElements.forEach(function(a,
c){e.widgetEventHandler.productReceived(c);a.querySelectorAll("a").forEach(function(d){d.addEventListener("click",function(){e.widgetEventHandler.onProductClicked(c)})})})};this.widgetElements=f;this.widgetEventHandler=h}b.prototype.setupWidgetEvents=function(){this.setupBackgroundEvent();this.setupBrandLogoEvent();this.setupCallToActionEvent();this.setupHeadlineEvent();this.setupProductEvents()};return b}(),ja,qc=ia.BrandVideoProduct,rc=ia.BrandVideoStore,hb=(ja={},ja[qc]={brand:!0,product:!0,store:!1},
ja[rc]={brand:!0,product:!1,store:!0},ja),ib=function(){function b(f,h){var e=this;this.isALink=!1;this.videoManagers=[];this.videoPlayersStatus=[];this.impFired=[];this.mediaSourceSwapCompleted=[];this.getDynamicMetricAttributes=function(){var a;return a={},a[m.CAROUSEL_ITEM_INDEX]=e.currentPlayingIndex,a[m.CAROUSEL_PAGE_NUMBER]=e.currentCarouselPage,a};this.updateMediaAssetSources=function(a,c){var d=e.controllerOptions.shouldDelayMediaLoading;a&&d&&!e.mediaSourceSwapCompleted[c]&&(d=JSON.parse(a.dataset.videoAdAttributesProps),
e.updatePreviewImageSource(a,d),e.updateProductImageSource(a,d),e.mediaSourceSwapCompleted[c]=!0)};this.updateProductImageSource=function(a,c){var d,g=c.videoAdType;g=(null!==(d=hb[void 0===g?"":g])&&void 0!==d?d:{}).product;if(void 0===g?0:g)c=c.imageUrl,void 0===c&&(c=""),a&&c&&(a=a.querySelector('[data-type="productImage"]'))&&a.getAttribute("src")!==c&&a.setAttribute("src",c)};this.updatePreviewImageSource=function(a,c){c=c.videoPreviewImageSrc;a&&(a=a.querySelector("video"))&&a.getAttribute("poster")!==
c&&a.setAttribute("poster",c)};this.logImpression=function(a,c){if(!e.impFired[c]&&(a=a.querySelector('[data-type="ip"]'))){var d=a.getAttribute("data-src");d&&(a.setAttribute("src",d),e.impFired[c]=!0)}};this.pauseVideo=function(a){e.videoManagers[a].pause()};this.playVideo=function(a){e.videoManagers[a].play().then(function(){e.currentPlayingIndex=a}).catch()};this.setupPlayButtonEventHandlers=function(a,c,d){(a=a.querySelector('[data-type="playIcon"]'))&&a.addEventListener("click",function(g){return e.onPlayBtnEventTriggered(g,
c,d)})};this.updateClientMetricsContext=function(){e.metricsManager.setClientMetricsContext({getDynamicMetricsAttributes:e.getDynamicMetricAttributes})};this.setupViewabilityEvents=function(a,c){Y.registerElement(a,.5,!0,!0,!0,e.onFiftyPercentViewabilityChange,c);Y.registerElement(a,.01,!0,!0,!0,e.onOnePercentViewabilityChange,c)};this.onPlayBtnEventTriggered=function(a,c,d){a=e.videoManagers[c].videoAdAttributes;e.metricsManager.reportVideoPlayButtonTriggered(c,a);if(null===d||void 0===d?0:d.onImmersiveVideoCallback)d.onImmersiveVideoCallback(a);
else e.toggleVideosByPlayButton(c)};this.toggleVideosByPlayButton=function(a){e.pauseVideo(e.currentPlayingIndex);e.videoManagers[a].setMuteStatus(e.videoManagers[e.currentPlayingIndex].isMuted,J.INHERIT);e.playVideo(a)};this.isVideoPlaying=function(){return e.videoPlayersStatus.some(function(a){return a})};this.setConfigStyles=function(a,c){Object.assign(c.style,a)};this.carousel=La["default"].getCarousel(u["default"].cardRoot.getElementsByClassName("a-carousel-container")[0]);this.metricsManager=
f;this.controllerOptions=h;this.currentCarouselPage=this.currentPlayingIndex=0;this.prevPlayingIndex=-1;this.updateClientMetricsContext()}b.prototype.setupEventHandlers=function(f,h,e,a){var c=this,d;void 0===a&&(a={});var g=h.videoAdType,k=null!==(d=hb[void 0===g?"":g])&&void 0!==d?d:{};d=k.brand;g=k.product;k=k.store;var l=a.isItemOnFirstPage;a=(a=a.selectors)?a.brandElementSelector:void 0;var p=this.controllerOptions,t=p.shouldDelayMediaLoading,r=p.enableAutoScroll,x=void 0===r?!1:r;r=p.enableImmersiveVideo;
r=void 0===r?!1:r;p=p.showDealBadge;p=void 0===p?!1:p;var y=f.querySelector('[data-type="videoContainer"]'),M=f.querySelectorAll("a");M&&M.forEach(function(Aa){Aa.addEventListener("click",function(){c.isALink=!0})});if(!y)return this.metricsManager.reportMissingVideoElement(h),!1;x=new ab(this.metricsManager,h,{onPlaybackCompletedCallback:x?this.onPlaybackCompletedCallback:void 0,onImmersiveVideoCallback:r?this.onImmersiveVideoCallback:void 0});l=new cb(y,x,h,!0,t&&l?!1:t,{shouldEnablePlayButton:!0});
this.videoManagers.push(l);this.setupViewabilityEvents(y,e);this.setupPlayButtonEventHandlers(f,e,{onImmersiveVideoCallback:r?this.onImmersiveVideoCallback:void 0});e=f.querySelector('[data-type="storeContainer"]');t=f.querySelector('[data-type="productContainer"]');r=f.querySelector(null!==a&&void 0!==a?a:K.BRAND_LOGO_HEADER_CONTAINER);a=f.querySelector(null!==a&&void 0!==a?a:K.BRAND_CONTAINER);if(g){if(!t)return this.metricsManager.reportMissingProductElement(h),!1;if(g=f.querySelectorAll('[data-type="productTitle"]')[0])g.style.display=
"-webkit-box"}if(d&&(!r||!a))return this.metricsManager.reportMissingBrandElement(h),!1;if(k&&!e)return!1;h=new fb(this.metricsManager,l);(new gb({headlineElement:e,brandElement:a,brandLogoElement:r,productElements:[t]},h)).setupWidgetEvents();p&&eb(f);return!0};return b}(),Ba=function(){var b=u["default"].cardRoot.getElementsByClassName("a-carousel")[0];b&&b.setAttribute("style","display:flex;height:auto;min-height:100%");(b=u["default"].cardRoot.getElementsByClassName("a-carousel-card"))&&Array.from(b).forEach(function(f){f.setAttribute("style",
"display:flex;flex-shrink:0;")})},sc=function(b){function f(h,e){var a=b.call(this,h,e)||this;a.start=function(){return n.__awaiter(a,void 0,void 0,function(){var c,d,g,k,l=this;return n.__generator(this,function(p){switch(p.label){case 0:return c=this.controllerOptions.viewportConfig,this.carouselViewport=u["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],c&&this.setConfigStyles(c,this.carouselViewport),Ba(),d=u["default"].cardRoot.querySelectorAll(K.CARD_ITEM),d.forEach(function(t,
r){var x=r<l.carouselItemsPerPage();x?l.logImpression(t,r):l.impFired[r]=!1;l.videoPlayersStatus[r]=!1;var y=JSON.parse(t.dataset.videoAdAttributesProps);t.style.visibility="inherit";l.setupEventHandlers(t,y,r,{isItemOnFirstPage:x})&&x&&l.updateMediaAssetSources(t,r)}),[4,this.carousel.initialized];case 1:return p.sent(),this.displayOrHideCarouselButtons(),this.carousel.on("change:pageNumber",this.onCarouselPageChange),g=da["default"].getCarousel(ua.unscope(this.carouselViewport)),k=g.getAttr("name"),
w["default"].on("a:carousel:"+k+":change:pageSize",this.onPageSizeChange),g.strategies.display.repaint(g),[2]}})})};a.carouselItemsPerPage=function(){var c=a.controllerOptions.minimumGutterWidth,d=a.carouselViewport.getBoundingClientRect().width,g=u["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].getBoundingClientRect().width;return Math.floor(d/(g+c))};a.onPageSizeChange=function(){a.displayOrHideCarouselButtons();a.updateResidualMediaAssetsOnPage(a.currentPlayingIndex)};a.displayOrHideCarouselButtons=
function(){var c=a.controllerOptions,d=c.isOptionalNavButton;if(c.shouldHideNavButtonOnPageChange){c=d?"a-carousel-goto-nextpage":"a-carousel-right";d=u["default"].cardRoot.getElementsByClassName(d?"a-carousel-goto-prevpage":"a-carousel-left")[0];c=u["default"].cardRoot.getElementsByClassName(c)[0];var g=u["default"].cardRoot.getElementsByClassName("a-carousel-page-max")[0];g=parseInt(g.innerHTML,10);d&&d.classList.toggle("aok-hidden",0===a.currentCarouselPage);c&&c.classList.toggle("aok-hidden",
a.currentCarouselPage+1===g)}};a.getNewIndicesOnPageChange=function(c,d,g){var k=a.impFired.length,l=c*g,p=d*g;if(a.controllerOptions.transitionStrategy===T.SEARCH_GRID){var t=Math.floor(k/g);g=k-g;c===t&&(l=g);d===t&&(p=g)}return{oldFirstIndex:p,newFirstIndex:l}};a.onCarouselPageChange=function(c){if(void 0===c)a.metricsManager.reportCarouselPageChanged(-1,-1);else{var d=c.newPageNumber-1,g=c.oldPageNumber-1;a.metricsManager.reportCarouselPageChanged(d,g);c=a.carouselItemsPerPage();var k=a.getNewIndicesOnPageChange(d,
g,c);g=k.oldFirstIndex;k=k.newFirstIndex;a.logImpressionsForCarouselItems(d,k,c);a.videoManagers[k].setMuteStatus(a.videoManagers[a.currentPlayingIndex].isMuted,J.INHERIT);a.setVideosOnPreviousPageOutOfView(g,k,c);a.setNewPageAndCurrentPlayingVideo(d,k);a.setVideosOnNewPageInView(k,c);a.displayOrHideCarouselButtons()}};a.logImpressionsForCarouselItems=function(c,d,g){c=g*(c+1);g=a.impFired.length;for(c=c<=g?c:g;d<c;d++)g=u["default"].cardRoot.querySelector('[data-index="'+d+'"]'),a.updateMediaAssetSources(g,
d),a.logImpression(g,d)};a.setNewPageAndCurrentPlayingVideo=function(c,d){a.currentCarouselPage=c;a.isVideoOnCurrentCarouselPage(a.currentPlayingIndex,c)&&a.controllerOptions.transitionStrategy!==T.SEARCH_GRID||(a.currentPlayingIndex=d)};a.setVideosOnPreviousPageOutOfView=function(c,d,g){a.onFiftyPercentViewabilityChange(0,!1,a.currentPlayingIndex);g=c+g;for(a.controllerOptions.transitionStrategy===T.SEARCH_GRID&&c<d&&(g=d);c<g&&c<a.videoManagers.length;c++)a.onOnePercentViewabilityChange(0,!1,c)};
a.setVideosOnNewPageInView=function(c,d){for(var g=c;g<c+d&&g<a.videoManagers.length;g++)if(a.onOnePercentViewabilityChange(1,!0,g),a.isVideoPlaying())a.onFiftyPercentViewabilityChange(1,!0,g)};a.onFiftyPercentViewabilityChange=function(c,d,g){a.isVideoOnCurrentCarouselPage(g,a.currentCarouselPage)&&(a.isALink?(a.isALink=!1,a.videoManagers[a.currentPlayingIndex].onFiftyPercentViewabilityChange(c,d,!0)):(a.videoPlayersStatus[g]=d,a.videoManagers[a.currentPlayingIndex].onFiftyPercentViewabilityChange(c,
d)))};a.onOnePercentViewabilityChange=function(c,d,g){if(a.isVideoOnCurrentCarouselPage(g,a.currentCarouselPage))a.videoManagers[g].onOnePercentViewabilityChange(c,d)};a.isVideoOnCurrentCarouselPage=function(c,d){var g=a.carouselItemsPerPage(),k=(d+1)*g,l=k-g;if(a.controllerOptions.transitionStrategy===T.SEARCH_GRID){var p=a.impFired.length;d===Math.floor(p/g)&&(k=p,l=p-g)}return c>=l&&c<k};a.updateResidualMediaAssetsOnPage=function(c){if(a.controllerOptions.shouldDelayMediaLoading)for(var d=a.carouselItemsPerPage();c<
(a.currentCarouselPage+1)*d&&c<a.videoManagers.length;c++){var g=u["default"].cardRoot.querySelector('[data-index="'+c+'"]');a.updateMediaAssetSources(g,c)}};a.carouselViewport=u["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0];return a}n.__extends(f,b);f.prototype.handlePageLoad=function(){var h=this,e=u["default"].cardRoot.querySelectorAll(K.CARD_ITEM);e.length&&e.forEach(function(a,c){a&&c<h.carouselItemsPerPage()&&h.logImpression(a,c)})};return f}(ib),tc=function(){return function(){var b=
this;this.update=function(f){b.dots&&b.dots[f]&&(Sb(b.dots,"a-selected"),b.select(f))};this.getCarouselDots=function(){return b.dots};this.isCarouselDotSelected=function(f){return b.dots&&b.dots[f]?b.dots[f].classList.contains("a-selected"):!1};this.select=function(f){b.dots&&b.dots[f]&&b.dots[f].classList.add("a-selected")};(this.dots=Array.prototype.slice.call(u["default"].cardRoot.querySelectorAll(".a-dots > li")))&&0<this.dots.length&&this.select(0)}}(),uc=function(b,f){return n.__awaiter(void 0,
void 0,void 0,function(){var h;return n.__generator(this,function(e){switch(e.label){case 0:return[4,new Promise(function(a,c){zb(["@m/mash"],function(d){a(Mb(d))},c)})];case 1:return h=e.sent().navigate,(null===b||void 0===b?0:b.immersiveVideoDeepLinkUrl)&&h({url:b.immersiveVideoDeepLinkUrl,successCallback:function(){f.reportImmersiveVideoLoaded(b)},failCallback:function(a){f.reportImmersiveVideoFailed(a,b)}}),[2]}})})},vc=function(b){function f(h,e){var a=b.call(this,h,e)||this;a.cardItemsReceived=
[];a.start=function(){return n.__awaiter(a,void 0,void 0,function(){var c,d,g,k,l=this;return n.__generator(this,function(p){switch(p.label){case 0:return c=this.controllerOptions,d=c.viewportConfig,g=c.selectors,this.carouselViewport=u["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],d&&this.setConfigStyles(d,this.carouselViewport),Ba(),k=u["default"].cardRoot.querySelectorAll(K.CARD_ITEM),k.forEach(function(t,r){var x=JSON.parse(t.dataset.videoAdAttributesProps);0===r?(l.logImpression(t,
r),l.handleCardItemsReceived(0,x)):l.impFired[r]=!1;l.videoPlayersStatus[r]=!1;t.style.visibility="inherit";var y=l.isVideoOnFirstPage(r);l.setupEventHandlers(t,x,r,{isItemOnFirstPage:y,selectors:g})&&y&&l.updateMediaAssetSources(t,r)}),[4,this.carousel.initialized];case 1:return p.sent(),this.carousel.on("change:pageNumber",function(t){return l.onCarouselPageChange(t)}),[2]}})})};a.handleCardItemsReceived=function(c,d){a.cardItemsReceived[c]||(a.metricsManager.reportCardItemReceived(c,d),a.cardItemsReceived[c]=
!0)};a.onPlaybackCompletedCallback=function(){var c=a.controllerOptions.enableAutoScroll;if(void 0===c?0:c)a.autoScrolled=!0,a.carousel.gotoNextPage()};a.onCarouselPageChange=function(c){var d;if(void 0===c)a.metricsManager.reportCarouselPageChanged(-1,-1);else{var g=c.newPageNumber-1;c=c.oldPageNumber-1;null===(d=a.pagination)||void 0===d?void 0:d.update(g);a.updateCarouselFirstItemMargin(0===g);a.metricsManager.reportCarouselPageChanged(g,c,a.autoScrolled);a.autoScrolled=!1;d=a.videoManagers[a.currentPlayingIndex].isMuted;
var k=J.INHERIT;Q.isIOS()&&(d=!0,k=J.WEBKIT_MUTED);a.videoManagers[g].setMuteStatus(d,k);a.onOnePercentViewabilityChange(0,!1,a.currentPlayingIndex);a.currentPlayingIndex=g;a.currentCarouselPage=g;a.prevPlayingIndex=c;d=u["default"].cardRoot.querySelector('[data-index="'+a.currentPlayingIndex+'"]');k=u["default"].cardRoot.querySelector('[data-index="'+(a.currentPlayingIndex+1)+'"]');a.updateMediaAssetSources(k,a.currentPlayingIndex+1);a.logImpression(d,a.currentPlayingIndex);a.handleCardItemsReceived(a.currentPlayingIndex,
a.videoManagers[a.currentPlayingIndex].videoAdAttributes);a.onOnePercentViewabilityChange(1,!0,g);if(a.isVideoPlaying())a.onFiftyPercentViewabilityChange(1,!0,g);a.onFiftyPercentViewabilityChange(0,!1,c)}};a.onFiftyPercentViewabilityChange=function(c,d,g){var k=a.controllerOptions.carouselDisplayStrategy===H.SINGLE_ELEMENT?!(d&&g!==a.currentPlayingIndex):!0;g!==a.currentPlayingIndex&&g!==a.prevPlayingIndex||!k||(a.isALink?(a.isALink=!1,a.videoManagers[g].onFiftyPercentViewabilityChange(c,d,!0)):(a.videoPlayersStatus[g]=
d,a.videoManagers[g].onFiftyPercentViewabilityChange(c,d)))};a.onOnePercentViewabilityChange=function(c,d,g){if(g===a.currentCarouselPage)a.videoManagers[g].onOnePercentViewabilityChange(c,d)};a.getCarouselFirstItemMarginCalculations=function(c,d,g,k){switch(k){case H.SINGLE_ELEMENT:return(c-d)/2+g;default:return(c-d-5)/2}};a.updateCarouselFirstItemMargin=function(c){var d=a.controllerOptions,g=d.minimumGutterWidth;g=void 0===g?9:g;var k=d.carouselDisplayStrategy;if(d.shouldPeekCarouselItems){d=u["default"].cardRoot.getElementsByClassName("a-carousel")[0];
var l=g,p=u["default"].cardRoot.querySelectorAll(K.CARD_ITEM);c?1===p.length&&(l=0):l=a.getCarouselFirstItemMarginCalculations(screen.width,p[0].clientWidth,g,k);d.style.marginLeft=l.toString()+"px"}};a.isVideoOnFirstPage=function(c){return 1>=c};a.updateCarouselFirstItemMargin(!0);a.autoScrolled=!1;a.controllerOptions.enablePaginationDots&&(a.pagination=new tc);return a}n.__extends(f,b);f.prototype.handlePageLoad=function(){var h=u["default"].cardRoot.querySelectorAll(K.CARD_ITEM);if(h.length&&h[0]){var e=
JSON.parse(h[0].dataset.videoAdAttributesProps);this.logImpression(h[0],0);this.handleCardItemsReceived(0,e)}};f.prototype.onImmersiveVideoCallback=function(h){uc(h,this.metricsManager)};return f}(ib),jb;(function(b){b.Asin="ASIN";b.Video="VIDEO";b.Uri="URI"})(jb||(jb={}));var Z;(function(b){b.DETAIL="Detail";b.SEARCH="Search"})(Z||(Z={}));var ka;(function(b){b.DESKTOP="Desktop";b.MOBILE="Mobile"})(ka||(ka={}));var la,Ca,ma,na,oa,Da,pa,qa,G={SBV_468340:"SBV_468340",SBV_672322:"SBV_672322",SBV_708584:"SBV_708584"},
kb=n.__assign(n.__assign({},G),{SBV_623814:"SBV_623814",SBV_633512:"SBV_633512",SBV_633539:"SBV_633539",SBV_633907:"SBV_633907",SBV_736363:"SBV_736363",SBV_776653:"SBV_776653"}),lb=n.__assign(n.__assign({},kb),{MBV_394048:"MBV_394048",MBV_624077:"MBV_624077",SBV_414150:"SBV_414150",SBV_427616:"SBV_427616",SBV_620747:"SBV_620747",SBV_620753:"SBV_620753",SBV_642751:"SBV_642751",SBV_656845:"SBV_656845",SBV_668132:"SBV_668132",BUYX_DP_PAPERCUT_EXPERIMENTS_PRICE_COLOR_705983:"BUYX_DP_PAPERCUT_EXPERIMENTS_PRICE_COLOR_705983"}),
mb=n.__assign(n.__assign({},kb),{MBV_394383:"MBV_394383",MBV_624086:"MBV_624086",SBV_414153:"SBV_414153",SBV_427647:"SBV_427647",SBV_620032:"SBV_620032",SBV_620033:"SBV_620033",SBV_642769:"SBV_642769",SBV_656827:"SBV_656827",SBV_668135:"SBV_668135",SBV_677302:"SBV_677302",SBV_682273:"SBV_682273"}),nb=n.__assign(n.__assign({},G),{SBV_649291:"SBV_649291",SBV_686031:"SBV_686031"}),ob=n.__assign(n.__assign({},G),{SB_DP_THEMATIC_HRB_VIDEO_DESKTOP_598713:"SB_DP_THEMATIC_HRB_VIDEO_DESKTOP_598713"}),pb=n.__assign(n.__assign({},
G),{SB_DP_THEMATIC_HRB_VIDEO_MOBILE_598714:"SB_DP_THEMATIC_HRB_VIDEO_MOBILE_598714"}),qb=n.__assign(n.__assign({},G),{SBV_576903:"SBV_576903",SBV_576904:"SBV_576904"}),rb=n.__assign(n.__assign({},G),{SBV_576917:"SBV_576917",SBV_576918:"SBV_576918"}),Ea=n.__assign(n.__assign({},G),{SBV_476799:"SBV_476799",SBV_485007:"SBV_485007",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175"}),Fa=n.__assign(n.__assign({},G),{SBV_476799:"SBV_476799",SBV_485007:"SBV_485007",SBV_635550:"SBV_635550",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",
SBV_716513:"SBV_716513",SBV_723533:"SBV_723533",SBV_737682:"SBV_737682"}),sb=n.__assign(n.__assign({},G),{SBV_716513:"SBV_716513",SBV_716636:"SBV_716636",SBV_724265:"SBV_724265",SBV_737682:"SBV_737682",SBV_733716:"SBV_733716",SEARCH_637704:"SEARCH_637704",SEARCH_756370:"SEARCH_756370",SEARCH_756452:"SEARCH_756452",SEARCH_758318:"SEARCH_758318",SEARCH_767014:"SEARCH_767014",SEARCH_781046:"SEARCH_781046",SBV_776577:"SBV_776577"}),tb=n.__assign(n.__assign(n.__assign({},G),sb),{SEARCH_737855:"SEARCH_737855",
SBV_743352:"SBV_743352"}),ub=n.__assign(n.__assign(n.__assign({},G),sb),{SBV_683140:"SBV_683140",SBV_716346:"SBV_716346",SBV_745316:"SBV_745316",SEARCH_737563:"SEARCH_737563",SEARCH_785793:"SEARCH_785793",SEARCH_786608:"SEARCH_786608"}),wc=n.__assign({},G),N=n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign({},lb),mb),qb),rb),Ea),Fa),tb),ub),nb),ob),pb),aa=ka.DESKTOP,R=ka.MOBILE,xc=E.MULTI_BRAND_VIDEO,yc=E.SHORT_FORM_VIDEO,zc=
E.THEMATIC_VIDEO,Ac=E.VIDEO_SINGLE_BRAND,Bc=E.VIDEO_PRODUCT_COLLECTION,Cc=E.VIDEO_SPLIT,Dc=E.VIDEO_STORE,Ec=E.VIDEO_STORE_PRODUCT_FEATURE;var O={};O[xc]=(la={},la[aa]=lb,la[R]=mb,la);O[yc]=(Ca={},Ca[R]=nb,Ca);O[zc]=(ma={},ma[aa]=ob,ma[R]=pb,ma);O[Ac]=(na={},na[aa]=qb,na[R]=rb,na);O[Bc]=(oa={},oa[aa]=tb,oa[R]=ub,oa);O[Cc]=(Da={},Da[R]=wc,Da);O[Dc]=(pa={},pa[aa]=Ea,pa[R]=Ea,pa);O[Ec]=(qa={},qa[aa]=Fa,qa[R]=Fa,qa);O;var A;(function(b){b.C="C";b.T1="T1";b.T2="T2";b.T3="T3";b.T4="T4";b.T5="T5";b.T6="T6";
b.T7="T7"})(A||(A={}));var ra;(ra||(ra={})).SEARCH_GRID="searchGrid";var vb;(vb||(vb={})).SponsoredBrandsIngress="sponsoredbrands";var wb=function(){return function(b,f){var h,e=this;this.getTreatment=function(l){if(0===e.weblabsMap.size)Ka["default"].log("There are no weblabs information found by ClientWebLapHlper","ERROR",e.attribution);else{if(e.weblabsMap.has(l))return e.weblabsMap.get(l);Ka["default"].log("Get treatment for unknown weblab","ERROR",e.attribution)}};var a=new Map;b=b.split(",").filter(function(l){return 0<
l.length});if(0<b.length)try{for(var c=n.__values(b),d=c.next();!d.done;d=c.next()){var g=d.value.split(":");a.set(g[0].trim(),g[1].trim())}}catch(l){var k={error:l}}finally{try{d&&!d.done&&(h=c.return)&&h.call(c)}finally{if(k)throw k.error;}}this.weblabsMap=a;this.attribution=f}}(),Hc=function(b){var f=b.cardName,h=b.isDesktop,e=b.viewMetricsOptions;e=void 0===e?{}:e;var a=b.showEELBadge,c=b.verticalVisibilityTreatment;if(u["default"].cardRoot.dataset.props){h&&Fc();a&&Oa();var d=JSON.parse(u["default"].cardRoot.dataset.props),
g=new wb(d.weblabs,d.widgetType),k=new Wa({clientId:d.clientId,deviceEnv:Ya(),deviceOs:Za(),deviceType:za(),language:d.language,marketplaceId:d.marketplaceId,pageType:d.pageType,stage:ya.getStage(),weblabs:d.weblabs,widgetGroupId:d.widgetGroupId,widgetIndex:void 0,widgetType:d.widgetType,searchQuery:d.searchQuery},Xa(d.marketplaceId),e);d.widgetType===E.SHORT_FORM_VIDEO&&U["default"].visible().then(function(){k.reportWidgetOnScreen()});b.strategy===ra.SEARCH_GRID&&(lc.registerStrategy(X.SEARCH_GRID),
hc.registerStrategy(H.SEARCH_GRID));var l=Gc(k,b);d.pageType===Z.SEARCH&&l.handlePageLoad();a:{switch(c){case A.T1:f=ba.SMALL;break a;case A.T2:f=ba.LARGE;break a;case A.T3:f=ba.AF;break a}f=void 0}f?f===ba.AF?P.when("af").execute(function(){return Ga(g,d,k,l,b)}):U["default"].visible(f).then(function(){Ga(g,d,k,l,b)}):Ga(g,d,k,l,b)}else z.count(f+"-NoProps")},Gc=function(b,f){var h=f.isDesktop,e=f.shouldDelayMediaLoading,a=f.showDealBadge;f=n.__assign(n.__assign({},f.controllerOptions),{shouldDelayMediaLoading:e,
showDealBadge:a});return h?new sc(b,f):new vc(b,f)},Ga=function(b,f,h,e,a){return n.__awaiter(void 0,void 0,void 0,function(){var c,d,g,k;return n.__generator(this,function(l){switch(l.label){case 0:c=a.cardName;d=a.minNumberOfVideos;g=void 0===d?2:d;k=u["default"].cardRoot.querySelectorAll(K.CARD_ITEM);if(null===k||void 0===k||!k.length)return z.count(c+"-NoAds"),h.reportNoAdError(),[2];(null===k||void 0===k?void 0:k.length)<g&&(z.count(c+"-NumOfAdsLessThanMin"),h.reportNumOfAdsLessThanMinRequirement());
if(f.pageType===Z.DETAIL){l=u["default"].cardRoot.getElementsByClassName("a-carousel-header-row")[0];var p=u["default"].cardRoot.getElementsByClassName("a-carousel-heading")[0];l&&p&&(p.classList.add("featureHeading"),l.style.visibility="visible")}h.reportResponseReceived(k.length);Ic(b,h,a);return[4,e.start()];case 1:return l.sent(),[2]}})})},Ic=function(b,f,h){return n.__awaiter(void 0,void 0,void 0,function(){var e,a,c;return n.__generator(this,function(d){e=b.getTreatment(N.SBV_672322)===A.T1;
a=h.cardName;c=h.enableAdFeedback;Sa(f,{cardName:a,enableAdFeedback:c,isAdFeedbackForCards:e});return[2]})})},Fc=function(){var b=u["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],f=u["default"].cardRoot.getElementsByClassName("a-carousel-right")[0];if(b){var h=b.getElementsByClassName("a-carousel-button")[0];b.style.height="100%";h.style.top="45%"}f&&(f.style.height="100%",f.getElementsByClassName("a-carousel-button")[0].style.top="45%")},ba;(function(b){b.AF="AF";b[b.SMALL=500]=
"SMALL";b[b.LARGE=1E3]="LARGE"})(ba||(ba={}));var Jc=function(){return function(b,f,h){var e=this;void 0===h&&(h=!1);this.isALink=!1;this.videoManagers=[];this.videoPlayersStatus=[];this.impFired=[];this.carouselItemsPerPage=function(){var a=e.carouselViewport.clientWidth,c=u["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].clientWidth;return Math.floor(a/(c+18))};this.start=function(){return n.__awaiter(e,void 0,void 0,function(){var a,c,d=this;return n.__generator(this,function(g){switch(g.label){case 0:return this.carouselViewport=
u["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],Ba(),a=u["default"].cardRoot.querySelectorAll('[data-type="mbvItem"]'),a.forEach(function(k,l){l<d.carouselItemsPerPage()?d.logImpression(k,l):d.impFired[l]=!1;d.videoPlayersStatus[l]=!1;var p=JSON.parse(k.dataset.videoAdAttributesProps);k.style.visibility="inherit";k.querySelectorAll('[data-type="productTitle"]')[0].style.display="-webkit-box";var t=k.querySelector('[data-type="videoContainer"]'),r=k.querySelector('[data-type="productContainer"]'),
x=k.querySelector('[data-type="brandContainer"]'),y=k.querySelectorAll("a");y&&y.forEach(function(M){M.addEventListener("click",function(){d.isALink=!0})});t?r?x?(y=new ab(d.metricsManager,p),p=new cb(t,y,p,!0,d.shouldDelayLoadingVideos,{shouldEnablePlayButton:!0}),d.videoManagers.push(p),Y.registerElement(t,.5,!0,!0,!0,d.onFiftyPercentViewabilityChange,l),Y.registerElement(t,.01,!0,!0,!0,d.onOnePercentViewabilityChange,l),t=new fb(d.metricsManager,p),(new gb({brandElement:x,productElements:[r]},
t)).setupWidgetEvents(),(r=k.querySelector('[data-type="playIcon"]'))&&r.addEventListener("click",function(M){return d.onPlayBtnEventTriggered(M,l)}),d.shouldShowDealBadge&&eb(k)):d.metricsManager.reportMissingBrandElement(p):d.metricsManager.reportMissingProductElement(p):d.metricsManager.reportMissingVideoElement(p)}),[4,this.carousel.initialized];case 1:return g.sent(),this.carousel.on("change:pageNumber",this.onCarouselPageChange),c=da["default"].getCarousel(ua.unscope(this.carouselViewport)),
c.strategies.display.repaint(c),[2]}})})};this.getDynamicMetricAttributes=function(){var a;return a={},a[m.CAROUSEL_ITEM_INDEX]=e.currentPlayingIndex,a[m.CAROUSEL_PAGE_NUMBER]=e.currentCarouselPage,a};this.logImpression=function(a,c){if(!e.impFired[c]&&(a=a.querySelector('[data-type="ip"]'))){var d=a.getAttribute("data-src");d&&(a.setAttribute("src",d),e.impFired[c]=!0)}};this.updateClientMetricsContext=function(){e.metricsManager.setClientMetricsContext({getDynamicMetricsAttributes:e.getDynamicMetricAttributes})};
this.onCarouselPageChange=function(a){if(void 0===a)e.metricsManager.reportCarouselPageChanged(-1,-1);else{var c=a.newPageNumber-1,d=a.oldPageNumber-1;e.metricsManager.reportCarouselPageChanged(c,d);a=e.carouselItemsPerPage();var g=c*a;d*=a;var k=a*(c+1),l=e.impFired.length;k=k<=l?k:l;for(l=g;l<k;l++){var p=u["default"].cardRoot.querySelector('[data-index="'+l+'"]');e.logImpression(p,l)}e.videoManagers[g].setMuteStatus(e.videoManagers[e.currentPlayingIndex].isMuted,J.INHERIT);e.onFiftyPercentViewabilityChange(0,
!1,e.currentPlayingIndex);for(k=d;k<d+a&&k<e.videoManagers.length;k++)e.onOnePercentViewabilityChange(0,!1,k);e.currentCarouselPage=c;e.isVideoOnCurrentCarouselPage(e.currentPlayingIndex,c)||(e.currentPlayingIndex=g);for(k=g;k<g+a&&k<e.videoManagers.length;k++)if(e.onOnePercentViewabilityChange(1,!0,k),e.isMbvVideoPlaying())e.onFiftyPercentViewabilityChange(1,!0,k)}};this.onPlayBtnEventTriggered=function(a,c){e.metricsManager.reportVideoPlayButtonTriggered(c,e.videoManagers[c].videoAdAttributes);
e.pauseVideo(e.currentPlayingIndex);e.videoManagers[c].setMuteStatus(e.videoManagers[e.currentPlayingIndex].isMuted,J.INHERIT);e.playVideo(c)};this.pauseVideo=function(a){e.videoManagers[a].pause()};this.playVideo=function(a){e.videoManagers[a].play();e.currentPlayingIndex=a};this.isMbvVideoPlaying=function(){return e.videoPlayersStatus.some(function(a){return a})};this.onFiftyPercentViewabilityChange=function(a,c,d){e.isVideoOnCurrentCarouselPage(d,e.currentCarouselPage)&&(e.isALink?(e.isALink=!1,
e.videoManagers[e.currentPlayingIndex].onFiftyPercentViewabilityChange(a,c,!0)):(e.videoPlayersStatus[d]=c,e.videoManagers[e.currentPlayingIndex].onFiftyPercentViewabilityChange(a,c)))};this.onOnePercentViewabilityChange=function(a,c,d){if(e.isVideoOnCurrentCarouselPage(d,e.currentCarouselPage))e.videoManagers[d].onOnePercentViewabilityChange(a,c)};this.isVideoOnCurrentCarouselPage=function(a,c){var d=e.carouselItemsPerPage();c=(c+1)*d;return a>=c-d&&a<c};this.carousel=La["default"].getCarousel(u["default"].cardRoot.getElementsByClassName("a-carousel-container")[0]);
this.metricsManager=b;this.shouldDelayLoadingVideos=f;this.shouldShowDealBadge=h;this.currentCarouselPage=this.currentPlayingIndex=0;this.updateClientMetricsContext()}}(),ca=function(b,f){return b.querySelector("[class*="+f+"]")},Kc=function(b,f,h){b=JSON.parse(b);b.adCreativeMetaData=f.adCreativeMetaData;b.feedbackFormContainerId=h;return encodeURI(JSON.stringify(b))},Lc=function(b,f,h,e){return n.__awaiter(void 0,void 0,void 0,function(){var a,c,d,g,k,l,p,t;return n.__generator(this,function(r){a=
"adFeedbackModal_"+b;r=(null===(t=ca(f,"ad-feedback-modal-container"))||void 0===t?void 0:t.className)||"";c="."+f.className+" ."+r.replace(" ",".");g=(d=h().adCreativeMetaData.adCreativeDetails)?d.length:0;k=f.dataset.deviceType||"desktop";r=Math.max(560,125*g+130);var x=g;var y=k;x=e&&"true"===e.toLowerCase()?2>x?605:810:"tablet"==y?2>x?545:775:2>x?430:645;l={a11yOpenMessage:"",width:r,height:x};try{return p=Ob["default"].create(a,c,l),[2,p]}catch(M){throw z.count("adfeedback:cards:clientDesktop:modalCreation:failure",
1),Error("Modal Creation Failed : "+M);}})})},Oc=function(b,f,h,e,a,c){var d="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var g=ca(S["default"].cardRoot,d);b.on("beforeShow",function(){return n.__awaiter(void 0,void 0,void 0,function(){var k;return n.__generator(this,function(l){switch(l.label){case 0:return k=Mc(b,f,h),[4,b.render(function(p){var t="250px",r=h().adCreativeMetaData.adCreativeDetails;r&&2>r.length&&(t="150px");
g.style.marginTop=t;p.innerHTML="";t=p.appendChild;r=document.getElementsByTagName("html")[0].dir;var x=S["default"].createElement("div"),y=S["default"].createElement("div");x.innerHTML=a;"rtl"===r?(x.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
y.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(x.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),y.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
y.appendChild(x);t.call(p,y);t=document.getElementsByTagName("html")[0].dir;r=S["default"].createElement("div");"rtl"===t?r.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):r.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");Nc(g,r,e,k,c);p.appendChild(r)})];case 1:return l.sent(),[2]}})})})},Mc=function(b,f,h){h=h();var e=h.adCreativeMetaData.adCreativeDetails;
null===e||void 0===e?void 0:e.sort(function(a,c){return a.adCreativeIndex<c.adCreativeIndex?-1:1});return Kc(f,h,b.id)},Nc=function(b,f,h,e,a){f.appendChild(b);"function"==typeof z.uet&&z.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});Pb["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===h?"en-US":h}},{pl:e,deviceType:"desktop"}).then(function(c){return n.__awaiter(void 0,
void 0,void 0,function(){var d,g,k;return n.__generator(this,function(l){"function"==typeof z.uet&&z.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});z.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);d=S["default"].createElement("div");d.innerHTML=String(c.responseBody);for(g=0;g<d.children.length;++g)k=d.children[g],"SCRIPT"===k.tagName?Ha("script",k,f):"LINK"===k.tagName?Ha("link",k,f):Ha("div",k,f);f.removeChild(b);return[2]})})}).catch(function(){"function"==
typeof z.uet&&z.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});z.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);f.innerHTML=a});"function"==typeof z.uex&&z.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},Ha=function(b,f,h){var e=S["default"].createElement(b);e.innerHTML=f.innerHTML;f.getAttributeNames().forEach(function(a){e.setAttribute(a,f.getAttribute(a)||"")});h.appendChild(e)},xb={},Pc=function(b,f){return n.__awaiter(void 0,
void 0,void 0,function(){var h,e,a,c,d,g,k,l,p;return n.__generator(this,function(t){h=ca(b,"ad-feedback-primary-link");e=f().adFeedbackLabelId;a=Ma["default"].setup();c="open-modal"+e;d=f().adCreativeMetaData.adCreativeDetails;g=b.dataset;k=g.isDsaEnabled;l=g.weblabTreatment;p=String(k);"undefined"===p&&(p=d&&0<d.length?d[0].selectionSignals?"true":"false":"false");"true"===p&&"T1"!==l&&(p="false");a.attach(c,h);a.define(c,"click",function(){return n.__awaiter(void 0,void 0,void 0,function(){var r;
return n.__generator(this,function(x){switch(x.label){case 0:return(r=xb[e])?[3,2]:[4,Lc(e,b,f,p)];case 1:r=x.sent();var y=b.dataset,M=y.formHeaderText,Aa=y.dsaFormHeaderText;Oc(r,y.adFeedbackPayload,f,y.currentLocale,"true"===p?Aa:M,y.formLoadErrorText);xb[e]=r;x.label=2;case 2:return r.show(),[2]}})})});return[2]})})},Qc=function(b,f){var h=Ma["default"].setup(),e="mouse-enter"+f;f="mouse-leave"+f;var a=ca(b,"ad-feedback-primary-link"),c=ca(b,"ad-feedback-text-desktop"),d=ca(b,"ad-feedback-sprite");
h.attach(e,a);h.define(e,"mouseenter",function(){d.style.backgroundPosition="0px -12px";c.style.color="#111111"});h.attach(f,a);h.define(f,"mouseleave",function(){d.style.backgroundPosition="0px 0px";c.style.color="#555"})},yb=function(b){return n.__awaiter(void 0,void 0,void 0,function(){var f,h,e,a;return n.__generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),f=b(),h=u["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+f.adFeedbackLabelId)[0],e=h.dataset.isSponsoredLabelActive,
"false"===(e||"false").toLowerCase()?[2]:[4,Qc(h,f.adFeedbackLabelId)];case 1:return c.sent(),[4,Pc(h,b)];case 2:return c.sent(),[3,4];case 3:throw a=c.sent(),z.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+a);case 4:return[2]}})})},Ia=function(){return n.__awaiter(void 0,void 0,void 0,function(){var b,f,h,e,a,c,d,g,k,l,p;return n.__generator(this,function(t){if(!u["default"].cardRoot.dataset.props)return z.count("sbvMultiBrandVideoNoProps"),
[2];b=JSON.parse(u["default"].cardRoot.dataset.props);f=new wb(b.weblabs,E.MULTI_BRAND_VIDEO);h=b.pageType;a=(e=h===Z.DETAIL)&&f.getTreatment(N.SBV_620747)===A.T1;c=h===Z.SEARCH&&f.getTreatment(N.SBV_620753)===A.T1;d=e&&f.getTreatment(N.SBV_668132)===A.T1;g=f.getTreatment(N.MBV_394048)||"";a||c?(k=void 0,k=c?f.getTreatment(N.MBV_624077)||"":A.T2,l=f.getTreatment(N.SBV_642751)===A.T1,p={shouldLogViewMetrics:!0,shouldBillViewMetrics:!0},Hc({cardName:"multi-brand-video-desktop",controllerOptions:{isOptionalNavButton:c,
minimumGutterWidth:c?0:18,shouldHideNavButtonOnPageChange:c,transitionStrategy:c?T.SEARCH_GRID:void 0,viewportConfig:{height:"380px"}},enableAdFeedback:yb,isDesktop:!0,shouldDelayMediaLoading:l,verticalVisibilityTreatment:k,viewMetricsOptions:p,showDealBadge:d,showEELBadge:f.getTreatment(N.SBV_656845)===A.T1,strategy:c?ra.SEARCH_GRID:void 0})):(Oa(),Rc(),g===A.T1||g===A.T5?U["default"].visible(ha.NONE).then(function(){sa(f,b,g,d)}):g===A.T2||g===A.T6?U["default"].visible(ha.SMALL).then(function(){sa(f,
b,g,d)}):g===A.T3||g===A.T7?U["default"].visible(ha.LARGE).then(function(){sa(f,b,g,d)}):sa(f,b,g,d));return[2]})})},sa=function(b,f,h,e){void 0===e&&(e=!1);return n.__awaiter(void 0,void 0,void 0,function(){var a,c,d,g,k,l,p,t;return n.__generator(this,function(r){switch(r.label){case 0:a=b.getTreatment(N.SBV_672322)===A.T1;c={shouldLogViewMetrics:!0};d=h===A.T4||h===A.T5||h===A.T6||h===A.T7;g=new Wa({clientId:f.clientId,deviceEnv:Ya(),deviceOs:Za(),deviceType:za(),language:f.language,marketplaceId:f.marketplaceId,
pageType:f.pageType,stage:ya.getStage(),weblabs:f.weblabs,widgetGroupId:f.widgetGroupId,widgetIndex:void 0,widgetType:f.widgetType},Xa(f.marketplaceId),c);k=u["default"].cardRoot.querySelectorAll('[data-type="mbvItem"]');if(null===k||void 0===k||!k.length)return z.count("sbvMultiBrandVideoNoAds"),g.reportNoAdError(),[2];2>(null===k||void 0===k?void 0:k.length)&&(z.count("sbvMultiBrandVideoNumOfAdsLessThanMin"),g.reportNumOfAdsLessThanMinRequirement());l=u["default"].cardRoot.getElementsByClassName("a-carousel-header-row")[0];
p=u["default"].cardRoot.getElementsByClassName("a-carousel-heading")[0];p.classList.add("featureHeading");l.style.visibility="visible";xa();g.reportResponseReceived(k.length);Sa(g,{cardName:"sbvMultiBrandVideo",enableAdFeedback:yb,isAdFeedbackForCards:a});t=new Jc(g,d,e);return[4,t.start()];case 1:return r.sent(),[2]}})})},Rc=function(){var b=u["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],f=u["default"].cardRoot.getElementsByClassName("a-carousel-right")[0];b.style.height="100%";
f.style.height="100%";b=b.getElementsByClassName("a-carousel-button")[0];f=f.getElementsByClassName("a-carousel-button")[0];b.style.top="45%";f.style.top="45%"},ha;(function(b){b[b.NONE=0]="NONE";b[b.SMALL=100]="SMALL";b[b.LARGE=500]="LARGE"})(ha||(ha={}));ta._operationNames=[];ta.card=function(){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(b){U["default"].pageReady.then(Ia,Ia);return[2]})})};ta.initOnReady=Ia});
